{"version":3,"sources":["../../../../src/internal/observable/from.ts","../../../../src/internal/util/isNumeric.ts","../../../../src/internal/scheduled/scheduled.ts","../../../../src/internal/util/isInteropObservable.ts","../../../../src/internal/scheduled/scheduleObservable.ts","../../../../src/internal/scheduled/schedulePromise.ts","../../../../src/internal/util/isIterable.ts","../../../../src/internal/scheduled/scheduleIterable.ts","components/Input/Input.js","../../../../src/internal/operators/pluck.ts","../../../../src/internal/observable/timer.ts","../../../../src/internal/operators/debounceTime.ts","../../../../src/internal/operators/exhaustMap.ts","pages/EditUser/EditUser.js"],"names":["from","input","scheduler","Observable","isNumeric","val","scheduled","isInteropObservable","subscriber","sub","add","schedule","observable","next","value","error","err","complete","iterator","Subscription","Symbol_iterator","done","result","Input","label","type","defaultValue","onKeyUp","style","width","className","ref","required","_i","length","plucker","props","x","i","p","currentProp","undefined","dueTime","period","Number","periodOrScheduler","async","index","dispatch","state","closed","source","DebounceTimeOperator","call","_super","DebounceTimeSubscriber","destination","_this","_next","clearDebounce","_complete","hasValue","lastValue","debouncedSubscription","Subscriber","exhaustMap","project","resultSelector","ExhaustMapOperator","ExhaustMapSubscriber","tslib_1","hasSubscription","_innerSub","innerSubscriber","SimpleInnerSubscriber","innerSubscription","prototype","hasCompleted","notifyNext","notifyError","notifyComplete","EditUser","user","userStream","currentState","inputNewUsernameRef","useRef","inputNewEmailRef","inputCurrentPasswordRef","inputNewPasswordRef","useCookies","cookies","setCookie","useState","currentPasswordError","setCurrentPasswordError","newEmailError","setNewEmailError","newUsernameError","setNewUsernameError","newPasswordError","setNewPasswordError","useEffect","buttonScrollTopE","document","querySelector","transform","window","scrollY","username","onClick","inputNewUsernameElement","inputNewEmailElement","inputCurrentPasswordElement","inputNewPasswordElement","idCartoonUser","data","userId","password","newUsername","newPassword","newEmail","createDataSubmit","timer","pipe","debounceTime","ajax","method","url","body","headers","authorization","pluck","catchError","response","replace","toLowerCase","includes","alert","submitForm$","current","subscribe","expires","Date","now","path","location"],"mappings":"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","file":"static/js/28.9dc5a76c.chunk.js","sourcesContent":[null,null,null,null,null,null,null,null,"import \"./Input.css\";\r\nimport React from \"react\";\r\n\r\nconst Input = ({\r\n  label,\r\n  input,\r\n  type,\r\n  error = null,\r\n  defaultValue = \"\",\r\n  onKeyUp,\r\n}) => {\r\n  return (\r\n    <div style={{ width: \"100%\" }}>\r\n      <div className=\"form-custom\">\r\n        <input\r\n          onKeyUp={onKeyUp}\r\n          defaultValue={defaultValue}\r\n          ref={input}\r\n          type={type || \"text\"}\r\n          required\r\n        />\r\n        <label className=\"label-name\">{label}</label>\r\n      </div>\r\n      {error && <div className=\"error-message\">{error}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Input;\r\n",null,null,null,null,"import \"./EditUser.css\";\r\n\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport { from, timer } from \"rxjs\";\r\nimport { ajax } from \"rxjs/ajax\";\r\nimport { catchError, debounceTime, exhaustMap, pluck } from \"rxjs/operators\";\r\n\r\nimport { userStream } from \"../../epics/user\";\r\nimport Input from \"../../components/Input/Input\";\r\nconst EditUser = () => {\r\n  const user = userStream.currentState();\r\n  const inputNewUsernameRef = useRef();\r\n  const inputNewEmailRef = useRef();\r\n  const inputCurrentPasswordRef = useRef();\r\n  const inputNewPasswordRef = useRef();\r\n  const [cookies, setCookie] = useCookies([\"idCartoonUser\"]);\r\n  const [currentPasswordError, setCurrentPasswordError] = useState(null);\r\n  const [newEmailError, setNewEmailError] = useState(null);\r\n  const [newUsernameError, setNewUsernameError] = useState(null);\r\n  const [newPasswordError, setNewPasswordError] = useState(null);\r\n  useEffect(() => {\r\n    const buttonScrollTopE = document.querySelector(\".button-scroll-top\");\r\n    buttonScrollTopE.style.transform = \"translateY(500px)\";\r\n    return () => {\r\n      if (window.scrollY === 0)\r\n        buttonScrollTopE.style.transform = \"translateY(0)\";\r\n    };\r\n  }, []);\r\n  return (\r\n    <div className=\"container-edit-user\">\r\n      <h1>Change information your account</h1>\r\n      <Input\r\n        label=\"New Username\"\r\n        defaultValue={user.username}\r\n        input={inputNewUsernameRef}\r\n        error={newUsernameError}\r\n      />\r\n      <Input label=\"New Email\" input={inputNewEmailRef} error={newEmailError} />\r\n      <Input\r\n        label=\"Current Password\"\r\n        type=\"password\"\r\n        input={inputCurrentPasswordRef}\r\n        error={currentPasswordError}\r\n      />\r\n      <Input\r\n        label={\"New Password\"}\r\n        type=\"password\"\r\n        input={inputNewPasswordRef}\r\n        error={newPasswordError}\r\n      />\r\n      <button\r\n        className=\"btn btn-primary button-submit-edit\"\r\n        onClick={() =>\r\n          submitForm$(\r\n            inputNewUsernameRef.current,\r\n            inputNewEmailRef.current,\r\n            inputCurrentPasswordRef.current,\r\n            inputNewPasswordRef.current,\r\n            cookies.idCartoonUser,\r\n            setCurrentPasswordError,\r\n            setNewEmailError,\r\n            setNewUsernameError,\r\n            setNewPasswordError\r\n          ).subscribe((response) => {\r\n            setCookie(\"idCartoonUser\", response, {\r\n              expires: new Date(Date.now() + 43200000),\r\n              path: \"/\",\r\n            });\r\n            alert(\"Success changing your account\");\r\n            window.location.replace(\"/\");\r\n          })\r\n        }\r\n      >\r\n        Submit\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction submitForm$(\r\n  inputNewUsernameElement,\r\n  inputNewEmailElement,\r\n  inputCurrentPasswordElement,\r\n  inputNewPasswordElement,\r\n  idCartoonUser,\r\n  setCurrentPasswordError,\r\n  setNewEmailError,\r\n  setNewUsernameError,\r\n  setNewPasswordError\r\n) {\r\n  const data = createDataSubmit(\r\n    inputNewUsernameElement,\r\n    inputNewEmailElement,\r\n    inputCurrentPasswordElement,\r\n    inputNewPasswordElement\r\n  );\r\n  return timer(0).pipe(\r\n    debounceTime(500),\r\n    exhaustMap(() =>\r\n      ajax({\r\n        method: \"PUT\",\r\n        url: \"/api/users/current\",\r\n        body: data,\r\n        headers: {\r\n          authorization: `Bearer ${idCartoonUser}`,\r\n        },\r\n      }).pipe(\r\n        pluck(\"response\", \"message\"),\r\n        catchError((err) => {\r\n          if (\r\n            err.response.error\r\n              .replace(/ /g, \"\")\r\n              .toLowerCase()\r\n              .includes(\"currentpassword\")\r\n          ) {\r\n            setCurrentPasswordError(err.response.error);\r\n            return from([]);\r\n          } else {\r\n            setCurrentPasswordError(null);\r\n          }\r\n          if (err.response.error.toLowerCase().includes(\"email\")) {\r\n            setNewEmailError(err.response.error);\r\n            return from([]);\r\n          } else {\r\n            setNewEmailError(null);\r\n          }\r\n          if (err.response.error.toLowerCase().includes(\"username\")) {\r\n            setNewUsernameError(err.response.error);\r\n            return from([]);\r\n          } else {\r\n            setNewUsernameError(null);\r\n          }\r\n          if (err.response.error.toLowerCase().includes(\"password\")) {\r\n            setNewPasswordError(err.response.error);\r\n            return from([]);\r\n          } else {\r\n            setNewPasswordError(null);\r\n          }\r\n          alert(err.response.error);\r\n          return from([]);\r\n        })\r\n      )\r\n    )\r\n  );\r\n}\r\n\r\nfunction createDataSubmit(\r\n  inputNewUsernameElement,\r\n  inputNewEmailElement,\r\n  inputCurrentPasswordElement,\r\n  inputNewPasswordElement\r\n) {\r\n  let data = {\r\n    userId: userStream.currentState().userId,\r\n    password: inputCurrentPasswordElement.value,\r\n  };\r\n  if (inputNewUsernameElement.value) {\r\n    data = {\r\n      ...data,\r\n      newUsername: inputNewUsernameElement.value,\r\n    };\r\n  }\r\n  if (inputNewPasswordElement.value) {\r\n    data = {\r\n      ...data,\r\n      newPassword: inputNewPasswordElement.value,\r\n    };\r\n  }\r\n  if (inputNewEmailElement.value) {\r\n    data = {\r\n      ...data,\r\n      newEmail: inputNewEmailElement.value,\r\n    };\r\n  }\r\n  return data;\r\n}\r\n\r\nexport default EditUser;\r\n"],"sourceRoot":""}