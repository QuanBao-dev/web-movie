{"version":3,"sources":["../../../../src/internal/observable/empty.ts","../../../../src/internal/util/isNumeric.ts","../../../../src/internal/operators/mergeMap.ts","../../../../src/internal/util/noop.ts","store/caches.js","../../../../src/internal/observable/throwError.ts","../../../../src/internal/observable/defer.ts","../../../../src/internal/util/isDate.ts","../../../../src/internal/operators/pluck.ts","../../../../src/internal/operators/filter.ts","../../../../src/internal/observable/timer.ts","../../../../src/internal/operators/mergeAll.ts","../../../../src/internal/operators/tap.ts","../../../../src/internal/observable/concat.ts","../../../../src/internal/operators/concatAll.ts","../../../../src/internal/observable/iif.ts","../../../../src/internal/operators/retry.ts","store/character.js","epics/character.js","pages/CharacterDetail/CharacterDetail.js"],"names":["empty","scheduler","isNumeric","val","concurrent","resultSelector","source","MergeMapOperator","MergeMapSubscriber","destination","project","Number","_this","_super","_next","value","push","_tryNext","result","index","error","err","active","_innerSub","innerSubscriber","innerSubscription","hasCompleted","unsubscribe","prototype","notifyNext","notifyComplete","buffer","initialState","behaviorSubject","BehaviorSubject","state","cachesStore","subscribe","setState","currentState","ans","updateData","obj","next","throwError","subscriber","dispatch","_a","defer","observableFactory","Observable","input","isDate","_i","length","plucker","props","x","i","p","currentProp","undefined","filter","predicate","thisArg","FilterOperator","call","FilterSubscriber","tslib_1","dueTime","period","periodOrScheduler","async","closed","tap","nextOrObserver","complete","DoOperator","TapSubscriber","observerOrNext","noop","_tapComplete","_tapError","isFunction","_context","_tapNext","concatAll","trueResult","count","RetryOperator","RetrySubscriber","isStopped","require","role","page","numberDisplay","dataCharacter","dataCharacterRaw","characterStream","object","init","v","updateRole","updatePage","AllAnimeRelated","loadable","fetchCharacterDetailData$","characterId","iif","dataCharacterDetail","timer","pipe","map","data","ajax","timeout","retry","pluck","status","Error","fetchVoiceActorByCharacterId$","delay","fetchAnimeByCharacterId$","fetchMangaByCharacterId$","CharacterDetail","parseInt","match","params","useState","setDataCharacterDetail","dataCharacterDetailRef","useRef","useEffect","window","scroll","top","isDoneLoadingVoices","setIsDoneLoadingVoices","subscription","from","typeResponse","catchError","of","response","animeography","mangagraphy","anime","manga","type","voice_actors","console","fetchData$","current","className","src","images","webp","image_url","alt","name","name_kanji","favorites","nicknames","join","about","style","boxShadow","replace","animeList","lazy","actor","to","person","mal_id","toLocaleLowerCase","key","jpg","width","effect","height","title","language","display","justifyContent","color","size"],"mappings":"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","file":"static/js/13.67b49f44.chunk.js","sourcesContent":[null,null,null,null,"import { BehaviorSubject } from \"rxjs\";\r\nconst initialState = {};\r\nconst behaviorSubject = new BehaviorSubject(initialState);\r\nlet state = initialState;\r\nconst cachesStore = {\r\n  subscribe: (setState) =>\r\n    behaviorSubject.subscribe((value) => setState(value)),\r\n  currentState: () => {\r\n    let ans;\r\n    behaviorSubject.subscribe((value) => {\r\n      ans = value;\r\n    });\r\n    return ans;\r\n  },\r\n  updateData: (obj) => {\r\n    state = {\r\n      ...state,\r\n      ...obj,\r\n    };\r\n    behaviorSubject.next(state);\r\n  },\r\n};\r\n\r\nexport default cachesStore;\r\n",null,null,null,null,null,null,null,null,null,null,null,null,"const { BehaviorSubject } = require(\"rxjs\");\r\n\r\nconst behaviorSubject = new BehaviorSubject();\r\nconst initialState = {\r\n  role: null,\r\n  page: 1,\r\n  numberDisplay: 12,\r\n  dataCharacter:[],\r\n  dataCharacterRaw: [],\r\n};\r\nlet state = initialState;\r\nconst characterStore = {\r\n  initialState,\r\n  updateData: (object = initialState) => {\r\n    state = {\r\n      ...state,\r\n      ...object\r\n    };\r\n    behaviorSubject.next(state);\r\n  },\r\n  init: () => {\r\n    behaviorSubject.next(state);\r\n  },\r\n  subscribe: (setState) => behaviorSubject.subscribe(setState),\r\n  currentState: () => {\r\n    let ans;\r\n    behaviorSubject.subscribe((v) => (ans = v));\r\n    return ans || initialState; \r\n  },\r\n  updateRole: (role) => {\r\n    state = {\r\n      ...state,\r\n      role: role,\r\n    };\r\n    behaviorSubject.next(state);\r\n  },\r\n  updatePage: (page) => {\r\n    state = {\r\n      ...state,\r\n      page,\r\n    };\r\n    behaviorSubject.next(state);\r\n  },\r\n};\r\n\r\nexport default characterStore;\r\n","import characterStore from \"../store/character\";\r\n\r\nexport const characterStream = characterStore;","import \"./CharacterDetail.css\";\r\nimport \"react-lazy-load-image-component/src/effects/opacity.css\";\r\n\r\nimport loadable from \"@loadable/component\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { from, iif, of, timer } from \"rxjs\";\r\nimport { ajax } from \"rxjs/ajax\";\r\nimport {\r\n  catchError,\r\n  concatAll,\r\n  delay,\r\n  map,\r\n  pluck,\r\n  retry,\r\n  tap,\r\n  timeout,\r\n} from \"rxjs/operators\";\r\n\r\nimport { characterStream } from \"../../epics/character\";\r\nimport cachesStore from \"../../store/caches\";\r\n\r\nconst AllAnimeRelated = loadable(() =>\r\n  import(\"../../components/AllAnimeRelated/AllAnimeRelated\")\r\n);\r\n\r\nconst CharacterDetail = (props) => {\r\n  const characterId = parseInt(props.match.params.characterId);\r\n  const [dataCharacterDetail, setDataCharacterDetail] = useState({});\r\n  const dataCharacterDetailRef = useRef({});\r\n  useEffect(() => {\r\n    window.scroll({\r\n      top: 0,\r\n    });\r\n    return () => {\r\n      characterStream.updateData({ role: null });\r\n    };\r\n  }, []);\r\n\r\n  const [isDoneLoadingVoices, setIsDoneLoadingVoices] = useState(false);\r\n  useEffect(() => {\r\n    const subscription = fetchData$(\r\n      characterId,\r\n      setIsDoneLoadingVoices\r\n    ).subscribe((v) => {\r\n      if (v.error) return;\r\n      setDataCharacterDetail({ ...dataCharacterDetailRef.current, ...v });\r\n      dataCharacterDetailRef.current = {\r\n        ...dataCharacterDetailRef.current,\r\n        ...v,\r\n      };\r\n    });\r\n    return () => {\r\n      subscription.unsubscribe();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [characterId]);\r\n  return (\r\n    <div className=\"character-detail-container\">\r\n      <div className=\"character-information-wrapper\">\r\n        <img\r\n          className=\"image-character\"\r\n          src={\r\n            dataCharacterDetail.images\r\n              ? dataCharacterDetail.images.webp.image_url\r\n              : \"https://us.123rf.com/450wm/pikepicture/pikepicture1612/pikepicture161200526/68824651-stock-vector-male-default-placeholder-avatar-profile-gray-picture-isolated-on-white-background-for-your-design-ve.jpg?ver=6\"\r\n          }\r\n          alt=\"image_character\"\r\n        ></img>\r\n        {dataCharacterDetail.name && (\r\n          <div className=\"character-information\">\r\n            {dataCharacterDetail.name && (\r\n              <div className=\"wrapper-text\">\r\n                <span className=\"text-capitalize\">name</span>\r\n                <span>{dataCharacterDetail.name}</span>\r\n              </div>\r\n            )}\r\n            {characterStream.currentState() &&\r\n              characterStream.currentState().role && (\r\n                <div className=\"wrapper-text\">\r\n                  <span className=\"text-capitalize\">role</span>\r\n                  <span>{characterStream.currentState().role}</span>\r\n                </div>\r\n              )}\r\n            {dataCharacterDetail.name_kanji && (\r\n              <div className=\"wrapper-text\">\r\n                <span className=\"text-capitalize\">name kanji</span>\r\n                <span>{dataCharacterDetail.name_kanji}</span>\r\n              </div>\r\n            )}\r\n            {!!dataCharacterDetail.favorites && (\r\n              <div className=\"wrapper-text\">\r\n                <span className=\"text-capitalize\">favorites</span>\r\n                <span>{dataCharacterDetail.favorites}</span>\r\n              </div>\r\n            )}\r\n            {dataCharacterDetail.nicknames &&\r\n              dataCharacterDetail.nicknames.length > 0 && (\r\n                <div className=\"wrapper-text\">\r\n                  <span className=\"text-capitalize\">nicknames</span>\r\n                  <span>{dataCharacterDetail.nicknames.join(\", \")}</span>\r\n                </div>\r\n              )}\r\n          </div>\r\n        )}\r\n      </div>\r\n      {dataCharacterDetail.about && (\r\n        <div\r\n          className=\"wrapper-text\"\r\n          style={{\r\n            boxShadow: \"none\",\r\n          }}\r\n        >\r\n          <span className=\"text-capitalize\">about</span>\r\n          <pre className=\"text-about-character\">\r\n            {dataCharacterDetail.about.replace(/\\\\n/g, \"\")}\r\n          </pre>\r\n        </div>\r\n      )}\r\n      {dataCharacterDetail.animeography &&\r\n        dataCharacterDetail.animeography.length !== 0 && (\r\n          <div className=\"character-appear-container\">\r\n            <h1 className=\"text-capitalize\">Related Anime</h1>\r\n            <AllAnimeRelated\r\n              animeList={dataCharacterDetail.animeography}\r\n              lazy={true}\r\n            />\r\n          </div>\r\n        )}\r\n      {dataCharacterDetail.mangagraphy &&\r\n        dataCharacterDetail.mangagraphy.length !== 0 && (\r\n          <div className=\"character-appear-container\">\r\n            <h1 className=\"text-capitalize\">Related Manga</h1>\r\n            <AllAnimeRelated\r\n              animeList={dataCharacterDetail.mangagraphy}\r\n              lazy={true}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n      {dataCharacterDetail.voice_actors &&\r\n        dataCharacterDetail.voice_actors.length > 0 && (\r\n          <div className=\"voice-actor-container\">\r\n            <h1 className=\"text-capitalize\">\r\n              Voice actor\r\n              {dataCharacterDetail.voice_actors.length > 1 ? \"s\" : \"\"}\r\n            </h1>\r\n            <div className=\"voice-actor-list\">\r\n              {dataCharacterDetail.voice_actors.map((actor, index) => {\r\n                return (\r\n                  <Link\r\n                    to={\r\n                      \"/person/\" +\r\n                      actor.person.mal_id +\r\n                      \"-\" +\r\n                      actor.person.name\r\n                        .replace(/[ /%^&*():.$,]/g, \"-\")\r\n                        .toLocaleLowerCase()\r\n                    }\r\n                    className=\"actor-item\"\r\n                    key={index}\r\n                  >\r\n                    <LazyLoadImage\r\n                      src={actor.person.images.jpg.image_url}\r\n                      alt=\"person_image\"\r\n                      width=\"100%\"\r\n                      effect=\"opacity\"\r\n                      height=\"100%\"\r\n                    />\r\n                    <div className=\"actor-name\">\r\n                      <h3 title={actor.person.name.replace(\",\", \"\")}>\r\n                        {actor.person.name.replace(\",\", \"\")}\r\n                      </h3>\r\n                      <div title={actor.language}>( {actor.language} )</div>\r\n                    </div>\r\n                  </Link>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        )}\r\n      {!isDoneLoadingVoices && (\r\n        <div style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <CircularProgress color=\"secondary\" size=\"4rem\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction fetchCharacterDetailData$(characterId) {\r\n  return iif(\r\n    () =>\r\n      cachesStore.currentState().dataCharacterDetail &&\r\n      cachesStore.currentState().dataCharacterDetail[characterId] &&\r\n      cachesStore.currentState().dataCharacterDetail[characterId][\"info\"],\r\n    timer(0).pipe(\r\n      map(\r\n        () =>\r\n          cachesStore.currentState().dataCharacterDetail[characterId][\"info\"].data\r\n      )\r\n    ),\r\n    ajax(`https://api.jikan.moe/v4/characters/${characterId}`).pipe(\r\n      timeout(3000),\r\n      retry(10),\r\n      pluck(\"response\", \"data\"),\r\n      tap(({ status }) => {\r\n        if (status === 500) {\r\n          throw Error(\"Something went wrong\");\r\n        }\r\n      })\r\n    )\r\n  );\r\n}\r\n\r\nfunction fetchVoiceActorByCharacterId$(characterId) {\r\n  return iif(\r\n    () =>\r\n      cachesStore.currentState().dataCharacterDetail &&\r\n      cachesStore.currentState().dataCharacterDetail[characterId] &&\r\n      cachesStore.currentState().dataCharacterDetail[characterId][\r\n        \"voice actor\"\r\n      ],\r\n    timer(0).pipe(\r\n      map(\r\n        () =>\r\n          cachesStore.currentState().dataCharacterDetail[characterId][\r\n            \"voice actor\"\r\n          ].data\r\n      )\r\n    ),\r\n    ajax(`https://api.jikan.moe/v4/characters/${characterId}/voices`).pipe(\r\n      timeout(3000),\r\n      delay(1500),\r\n      tap(({ status }) => {\r\n        if (status === 500) {\r\n          throw Error(\"Something went wrong\");\r\n        }\r\n      }),\r\n      pluck(\"response\", \"data\"),\r\n      retry(10)\r\n    )\r\n  );\r\n}\r\nfunction fetchAnimeByCharacterId$(characterId) {\r\n  return iif(\r\n    () =>\r\n      cachesStore.currentState().dataCharacterDetail &&\r\n      cachesStore.currentState().dataCharacterDetail[characterId] &&\r\n      cachesStore.currentState().dataCharacterDetail[characterId][\"anime\"],\r\n    timer(0).pipe(\r\n      map(\r\n        () =>\r\n          cachesStore.currentState().dataCharacterDetail[characterId][\"anime\"].data\r\n      )\r\n    ),\r\n    ajax(`https://api.jikan.moe/v4/characters/${characterId}/anime`).pipe(\r\n      timeout(3000),\r\n      delay(1500),\r\n      retry(10),\r\n      pluck(\"response\", \"data\"),\r\n      tap(({ status }) => {\r\n        if (status === 500) {\r\n          throw Error(\"Something went wrong\");\r\n        }\r\n      })\r\n    )\r\n  );\r\n}\r\nfunction fetchMangaByCharacterId$(characterId) {\r\n  return iif(\r\n    () =>\r\n      cachesStore.currentState().dataCharacterDetail &&\r\n      cachesStore.currentState().dataCharacterDetail[characterId] &&\r\n      cachesStore.currentState().dataCharacterDetail[characterId][\"manga\"],\r\n    timer(0).pipe(\r\n      map(\r\n        () =>\r\n          cachesStore.currentState().dataCharacterDetail[characterId][\"manga\"].data\r\n      )\r\n    ),\r\n    ajax(`https://api.jikan.moe/v4/characters/${characterId}/manga`).pipe(\r\n      timeout(3000),\r\n      delay(1500),\r\n      retry(10),\r\n      pluck(\"response\", \"data\"),\r\n      tap(({ status }) => {\r\n        if (status) {\r\n          throw Error(\"Something went wrong\");\r\n        }\r\n      })\r\n    )\r\n  );\r\n}\r\n\r\nfunction fetchData$(characterId, setIsDoneLoadingVoices) {\r\n  return from([\r\n    fetchCharacterDetailData$(characterId).pipe(\r\n      map((data) => ({ data, typeResponse: \"info\" })),\r\n      catchError(() => of({})),\r\n    ),\r\n    fetchAnimeByCharacterId$(characterId).pipe(\r\n      map((data) => ({ data, typeResponse: \"anime\" })),\r\n      catchError(() => of([])),\r\n    ),\r\n    fetchMangaByCharacterId$(characterId).pipe(\r\n      map((data) => ({ data, typeResponse: \"manga\" })),\r\n      catchError(() => of([])),\r\n    ),\r\n    fetchVoiceActorByCharacterId$(characterId).pipe(\r\n      map((data) => ({ data, typeResponse: \"voice actor\" })),\r\n      catchError(() => of([]))\r\n    ),\r\n  ]).pipe(\r\n    concatAll(),\r\n    map((response) => {\r\n      // [dataCharacter, dataVoiceActor, dataAnime, dataManga]\r\n      cachesStore.updateData({\r\n        dataCharacterDetail: {\r\n          ...cachesStore.currentState().dataCharacterDetail,\r\n          [characterId]: {\r\n            ...(cachesStore.currentState().dataCharacterDetail || {})[\r\n              characterId\r\n            ],\r\n            [response.typeResponse]: {\r\n              ...response,\r\n            },\r\n          },\r\n        },\r\n      });\r\n      switch (response.typeResponse) {\r\n        case \"info\":\r\n          return {\r\n            ...response.data,\r\n          };\r\n        case \"anime\":\r\n          return {\r\n            animeography: [...response.data],\r\n          };\r\n        case \"manga\":\r\n          return {\r\n            mangagraphy: [\r\n              ...response.data.map(({ manga, role }) => ({\r\n                anime: manga,\r\n                role,\r\n                type: \"manga\",\r\n              })),\r\n            ],\r\n            typeResponse: \"manga\",\r\n          };\r\n        default:\r\n          setIsDoneLoadingVoices(true);\r\n          return {\r\n            voice_actors: response.data,\r\n          };\r\n      }\r\n    }),\r\n    catchError((error) => {\r\n      console.error(error);\r\n      return of({ error: \"Something went wrong\" });\r\n    })\r\n  );\r\n}\r\n\r\nexport default CharacterDetail;\r\n"],"sourceRoot":""}