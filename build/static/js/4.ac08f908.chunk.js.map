{"version":3,"sources":["../node_modules/nanoid/url-alphabet/index.js","../node_modules/nanoid/index.browser.js","store/message-input.js","epics/message-input.js","components/MessageInput/MessageInput.js","components/Chat/Chat.js"],"names":["nanoid","size","id","bytes","crypto","getRandomValues","Uint8Array","byte","toString","toUpperCase","initialState","imgsMessage","isInBottomChatBot","behaviorSubject","BehaviorSubject","state","messageInputStream","subscribe","setState","init","next","currentState","ans","v","updateImgsMessage","newImage","deleteImageByIndex","index","slice","length","updateIsInBottomChatBot","bool","idTyping","sendMessage","text","images","isWithoutName","inputNameDialogRef","setErrorName","appendNewPhotoMessage","messageDialogE","user","idGroup","socket","appendNewMessageDialog","message","current","value","trim","forEach","uri","avatarImage","undefined","emit","username","buttonGetRemoteElement","document","getElementById","disabled","MessageInput","userGlobal","useState","messageInputState","setMessageInputState","messageInputRef","useRef","useEffect","subscription","on","unsubscribe","subStartTyping","subStopTyping","fromEvent","pipe","first","debounceTime","innerHTML","innerText","style","transition","width","className","map","key","src","alt","height","onClick","contentEditable","data-placeholder","ref","suppressContentEditableWarning","onPaste","event","preventDefault","originalEvent","clipboardData","getData","items","type","indexOf","blob","getAsFile","reader","FileReader","onload","target","result","readAsDataURL","execCommand","onTouchStart","e","onBlur","replace","onInput","extractImg","match","base64Img","onKeyUp","onKeyDown","el","atStart","window","getSelection","focusOffset","focus","createRange","range","selectNodeContents","collapse","sel","removeAllRanges","addRange","body","createTextRange","textRange","moveToElementText","select","createCaretPlacer","keyCode","cursor","marginLeft","fontSize","input","querySelector","theaterStream","appendNewUserSeen","avatar","allMessages","elements","childNodes","newSpanContainer","add","createElement","newSpan","newImg","append","allowFullscreen","allowfullscreen","requestFullscreen","catch","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullScreen","base64DataUrl","file","Promise","resolve","reject","onerror","ev","error","isYourMessage","messageDialogContainerE","newElement","newSpanContentMessage","newSpanUsernameMessage","imageAvatarMessage","test","link","handleScrollingToBottom","transform","numMessage","unreadMessage","updateData","scrollToBottom","buttonScroll","isInBottom","containerMessageChatBot","scrollHeight","scrollTop","offsetHeight","containerChatBotMessage","scroll","top","behavior","newImageAvatar","popUpActiveContainer","popUpActive","onclick","parentElement","display","getElementsByTagName","item","naturalWidth","naturalHeight","opacity","contains","groupId","chatBotE","notificationTypingContainerElement","newNotification","newUsername","appendNewUserTyping","elementMatchIndex","find","element","remove","eliminateUserByIdTyping","Chat","withoutName","isZoom","messageDialogRef","inputRefFile","buttonLikeRef","containerMessageChatBotRef","errorName","connected","connect","filter","subscription2","close","backgroundColor","Input","label","color","click","multiple","onChange","a","i","files","alert"],"mappings":"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","file":"static/js/4.ac08f908.chunk.js","sourcesContent":["let urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nexport { urlAlphabet }\n","import { urlAlphabet } from './url-alphabet/index.js'\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nlet customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nlet customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nlet nanoid = (size = 21) => {\n  let id = ''\n  let bytes = crypto.getRandomValues(new Uint8Array(size))\n  while (size--) {\n    let byte = bytes[size] & 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte < 63) {\n      id += '_'\n    } else {\n      id += '-'\n    }\n  }\n  return id\n}\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n","import { BehaviorSubject } from \"rxjs\";\r\nconst initialState = {\r\n  imgsMessage: [],\r\n  isInBottomChatBot:true\r\n};\r\n\r\nconst behaviorSubject = new BehaviorSubject(initialState);\r\nlet state = initialState;\r\nconst messageInputStore = {\r\n  initialState,\r\n  subscribe: (setState) => behaviorSubject.subscribe(setState),\r\n  init: () => {\r\n    state = {\r\n      ...state,\r\n      imgsMessage: [],\r\n      isInBottomChatBot:true\r\n    };\r\n    behaviorSubject.next(state);\r\n  },\r\n  currentState: () => {\r\n    let ans;\r\n    behaviorSubject.subscribe((v) => (ans = v));\r\n    return ans || initialState;\r\n  },\r\n  updateImgsMessage: (newImage) => {\r\n    state = {\r\n      ...state,\r\n      imgsMessage: [...state.imgsMessage, newImage],\r\n    };\r\n    behaviorSubject.next(state);\r\n  },\r\n  deleteImageByIndex: (index) => {\r\n    state = {\r\n      ...state,\r\n      imgsMessage: [\r\n        ...state.imgsMessage.slice(0, index),\r\n        ...state.imgsMessage.slice(index+1, state.imgsMessage.length),\r\n      ],\r\n    };\r\n    behaviorSubject.next(state);\r\n  },\r\n  updateIsInBottomChatBot:(bool) => {\r\n    state = {\r\n      ...state,\r\n      isInBottomChatBot: bool,\r\n    };\r\n    behaviorSubject.next(state);\r\n  }\r\n};\r\n\r\nexport default messageInputStore;\r\n","import messageInputStore from \"../store/message-input\";\r\n\r\nexport const messageInputStream = messageInputStore;\r\n\r\nexport function createCaretPlacer(el, atStart) {\r\n  if (window.getSelection().focusOffset === 0) {\r\n    el.focus();\r\n    if (\r\n      typeof window.getSelection != \"undefined\" &&\r\n      typeof document.createRange != \"undefined\"\r\n    ) {\r\n      var range = document.createRange();\r\n      range.selectNodeContents(el);\r\n      range.collapse(atStart);\r\n      var sel = window.getSelection();\r\n      sel.removeAllRanges();\r\n      sel.addRange(range);\r\n    } else if (typeof document.body.createTextRange != \"undefined\") {\r\n      var textRange = document.body.createTextRange();\r\n      textRange.moveToElementText(el);\r\n      textRange.collapse(atStart);\r\n      textRange.select();\r\n    }\r\n  }\r\n}\r\n","import \"./MessageInput.css\";\r\n\r\nimport { nanoid } from \"nanoid\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { fromEvent } from \"rxjs\";\r\nimport { debounceTime, first } from \"rxjs/operators\";\r\n\r\nimport {\r\n  createCaretPlacer,\r\n  messageInputStream,\r\n} from \"../../epics/message-input\";\r\n\r\nconst idTyping = nanoid();\r\nconst MessageInput = ({\r\n  appendNewMessageDialog,\r\n  appendNewPhotoMessage,\r\n  inputNameDialogRef,\r\n  idGroup,\r\n  socket,\r\n  user,\r\n  messageDialogE,\r\n  isWithoutName,\r\n  setErrorName,\r\n}) => {\r\n  const [messageInputState, setMessageInputState] = useState(\r\n    messageInputStream.initialState\r\n  );\r\n  const messageInputRef = useRef();\r\n  useEffect(() => {\r\n    const subscription = messageInputStream.subscribe(setMessageInputState);\r\n    messageInputStream.init();\r\n    socket.on(\"reconnect\", () => {\r\n      socket.emit(\"notify-user-stop-type\", idGroup, idTyping);\r\n    });\r\n    socket.on(\"disconnect\", () => {\r\n      socket.emit(\"notify-user-stop-type\", idGroup, idTyping);\r\n    });\r\n    return () => {\r\n      subscription.unsubscribe();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  useEffect(() => {\r\n    let subStartTyping, subStopTyping;\r\n    subStartTyping = fromEvent(messageInputRef.current, \"input\")\r\n      .pipe(first())\r\n      .subscribe(() => {\r\n        if (isWithoutName) {\r\n          socket.emit(\"notify-user-typing\", idGroup, idTyping, user.username);\r\n        } else {\r\n          socket.emit(\"notify-user-typing\", idGroup);\r\n        }\r\n      });\r\n    subStopTyping = fromEvent(messageInputRef.current, \"input\")\r\n      .pipe(debounceTime(600))\r\n      .subscribe(() => {\r\n        socket.emit(\"notify-user-stop-type\", idGroup, idTyping);\r\n        fromEvent(messageInputRef.current, \"input\")\r\n          .pipe(first())\r\n          .subscribe(() => {\r\n            if (isWithoutName) {\r\n              socket.emit(\r\n                \"notify-user-typing\",\r\n                idGroup,\r\n                idTyping,\r\n                user.username\r\n              );\r\n            } else {\r\n              socket.emit(\"notify-user-typing\", idGroup);\r\n            }\r\n          });\r\n      });\r\n    return () => {\r\n      subStartTyping && subStartTyping.unsubscribe();\r\n      subStopTyping && subStopTyping.unsubscribe();\r\n    };\r\n  }, [idGroup, isWithoutName, socket, user]);\r\n  if (messageInputRef.current) {\r\n    messageInputRef.current.innerHTML = messageInputRef.current.innerText;\r\n    if (\r\n      messageInputRef.current.innerHTML === \"\" &&\r\n      messageInputState.imgsMessage.length === 0\r\n    ) {\r\n      messageInputRef.current.style.transition = \"0.4s\";\r\n      messageInputRef.current.style.width = \"40px\";\r\n    }\r\n  }\r\n  if (messageInputState.imgsMessage.length > 0) {\r\n    messageInputRef.current.style.transition = \"0s\";\r\n    messageInputRef.current.style.width = \"100%\";\r\n  }\r\n  // console.log(messageInputState);\r\n  return (\r\n    <div className=\"message-input-wrapper\">\r\n      <div className=\"img-message-input\">\r\n        {messageInputState.imgsMessage.map((uri, key) => (\r\n          <div key={key} className=\"img-detail-wrapper\">\r\n            <img src={uri} alt={\"NOT_FOUND\"} width=\"100%\" height=\"100%\" />\r\n            <span\r\n              className=\"delete-symbol-message\"\r\n              onClick={() => {\r\n                messageInputStream.deleteImageByIndex(key);\r\n              }}\r\n            >\r\n              X\r\n            </span>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <div className=\"container-send-message-input\">\r\n        <div\r\n          contentEditable\r\n          data-placeholder=\"Aa\"\r\n          ref={messageInputRef}\r\n          suppressContentEditableWarning\r\n          onPaste={(event) => {\r\n            event.preventDefault();\r\n            let text = (event.originalEvent || event).clipboardData.getData(\r\n              \"text/plain\"\r\n            );\r\n            if (event.clipboardData.items[0].type.indexOf(\"image\") !== -1) {\r\n              var blob = event.clipboardData.items[0].getAsFile();\r\n              var reader = new FileReader();\r\n              reader.onload = function (event) {\r\n                messageInputStream.updateImgsMessage(event.target.result);\r\n              };\r\n              reader.readAsDataURL(blob);\r\n            }\r\n            document.execCommand(\"insertHTML\", false, text);\r\n          }}\r\n          className=\"message-input-container\"\r\n          onTouchStart={(e) => {\r\n            e.target.style.transition = \"0.4s\";\r\n            e.target.style.width = \"100%\";\r\n          }}\r\n          onBlur={(e) => {\r\n            if (\r\n              e.target.innerHTML.replace(/&nbsp;( )?/g, \"\") === \"\" &&\r\n              messageInputState.imgsMessage.length <= 0\r\n            ) {\r\n              e.target.style.transition = \"0.4s\";\r\n              e.target.style.width = \"40px\";\r\n            } else {\r\n              e.target.style.transition = \"0.4s\";\r\n              e.target.style.width = \"100%\";\r\n            }\r\n          }}\r\n          onInput={(e) => {\r\n            if (\r\n              e.target.innerHTML.replace(/&nbsp;( )?/g, \"\") !== \"\" ||\r\n              messageInputState.imgsMessage.length > 0\r\n            ) {\r\n              e.target.style.width = \"100%\";\r\n            }\r\n            const contentHTML = e.target.innerHTML || \"\";\r\n            let extractImg = contentHTML.match(\r\n              /<img src=\"[a-zA-Z0-9:/;,+=@#$%^&*\\\\]+\" alt=\"\">/g\r\n            );\r\n            extractImg && (extractImg = extractImg[0]);\r\n\r\n            if (extractImg) {\r\n              const base64Img = extractImg.match(\r\n                /data:image\\/[a-zA-Z0-9:/;,+=@#$%^&*\\\\]+/g\r\n              );\r\n              messageInputStream.updateImgsMessage(base64Img);\r\n            }\r\n          }}\r\n          onKeyUp={() => {\r\n            if (\r\n              messageInputRef.current.innerHTML === \"\" &&\r\n              messageInputState.imgsMessage.length === 0\r\n            ) {\r\n              messageInputRef.current.style.transition = \"0.4s\";\r\n              messageInputRef.current.style.width = \"40px\";\r\n            }\r\n          }}\r\n          onKeyDown={(e) => {\r\n            if (\r\n              messageInputRef.current.innerHTML === \"\" &&\r\n              messageInputState.imgsMessage.length === 0\r\n            ) {\r\n              messageInputRef.current.style.transition = \"0.4s\";\r\n              messageInputRef.current.style.width = \"40px\";\r\n            }\r\n            createCaretPlacer(e.target, false);\r\n            if (e.keyCode === 13) {\r\n              const checkInnerHTML = e.target.innerHTML;\r\n              if (\r\n                checkInnerHTML.replace(/&nbsp;( )?/g, \"\") === \"\" &&\r\n                messageInputState.imgsMessage.length === 0\r\n              ) {\r\n                e.preventDefault();\r\n                return;\r\n              }\r\n              const check = sendMessage(\r\n                e.target.innerHTML,\r\n                messageInputState.imgsMessage,\r\n                isWithoutName,\r\n                inputNameDialogRef,\r\n                setErrorName,\r\n                appendNewPhotoMessage,\r\n                messageDialogE,\r\n                user,\r\n                idGroup,\r\n                socket,\r\n                appendNewMessageDialog\r\n              );\r\n              if (check !== \"wrong\") {\r\n                e.target.innerHTML = \"\";\r\n                messageInputStream.init();\r\n              }\r\n              e.preventDefault();\r\n            }\r\n          }}\r\n        />\r\n        <i\r\n          className=\"far fa-paper-plane fa-2x\"\r\n          style={{ cursor: \"pointer\", marginLeft: \"10px\", fontSize: \"1.7rem\" }}\r\n          onClick={(e) => {\r\n            const input = document.querySelector(\".message-input-container\");\r\n            const check = sendMessage(\r\n              input.innerHTML,\r\n              messageInputState.imgsMessage,\r\n              isWithoutName,\r\n              inputNameDialogRef,\r\n              setErrorName,\r\n              appendNewPhotoMessage,\r\n              messageDialogE,\r\n              user,\r\n              idGroup,\r\n              socket,\r\n              appendNewMessageDialog\r\n            );\r\n            if (check !== \"wrong\") {\r\n              input.innerHTML = \"\";\r\n              messageInputStream.init();\r\n            }\r\n            e.preventDefault();\r\n          }}\r\n        ></i>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction sendMessage(\r\n  text,\r\n  images,\r\n  isWithoutName,\r\n  inputNameDialogRef,\r\n  setErrorName,\r\n  appendNewPhotoMessage,\r\n  messageDialogE,\r\n  user,\r\n  idGroup,\r\n  socket,\r\n  appendNewMessageDialog\r\n) {\r\n  const message = {\r\n    text,\r\n    images,\r\n  };\r\n  if (!isWithoutName)\r\n    if (inputNameDialogRef.current.value.trim() === \"\") {\r\n      setErrorName(\"please type in your name\");\r\n      return \"wrong\";\r\n    } else {\r\n      setErrorName(null);\r\n    }\r\n  if (message.images.length > 0) {\r\n    message.images.forEach((uri) => {\r\n      appendNewPhotoMessage(\r\n        uri,\r\n        \"You\",\r\n        true,\r\n        messageDialogE,\r\n        user ? user.avatarImage : undefined\r\n      );\r\n      if (user) {\r\n        socket.emit(\r\n          \"new-message-photo\",\r\n          inputNameDialogRef.current &&\r\n            inputNameDialogRef.current.value.trim() !== \"\"\r\n            ? inputNameDialogRef.current.value\r\n            : user.username,\r\n          uri,\r\n          idGroup,\r\n          user.avatarImage\r\n        );\r\n        const buttonGetRemoteElement =\r\n          document.getElementById(\"button-get-remote\");\r\n        if (buttonGetRemoteElement) {\r\n          socket.emit(\"update-user-online\", buttonGetRemoteElement.disabled);\r\n        }\r\n      } else\r\n        socket.emit(\r\n          \"new-message-photo\",\r\n          inputNameDialogRef.current &&\r\n            inputNameDialogRef.current.value.trim() !== \"\"\r\n            ? inputNameDialogRef.current.value\r\n            : user.username,\r\n          uri,\r\n          idGroup\r\n        );\r\n    });\r\n  }\r\n  if (message.text && message.text.trim() !== \"\") {\r\n    appendNewMessageDialog(\r\n      message.text,\r\n      \"You\",\r\n      true,\r\n      messageDialogE,\r\n      user ? user.avatarImage : undefined\r\n    );\r\n    if (user) {\r\n      socket.emit(\r\n        \"new-message\",\r\n        inputNameDialogRef.current &&\r\n          inputNameDialogRef.current.value.trim() !== \"\"\r\n          ? inputNameDialogRef.current.value\r\n          : user.username,\r\n        message.text,\r\n        idGroup,\r\n        user.avatarImage\r\n      );\r\n      const buttonGetRemoteElement =\r\n        document.getElementById(\"button-get-remote\");\r\n      if (buttonGetRemoteElement) {\r\n        socket.emit(\"update-user-online\", buttonGetRemoteElement.disabled);\r\n      }\r\n    } else\r\n      socket.emit(\r\n        \"new-message\",\r\n        inputNameDialogRef.current &&\r\n          inputNameDialogRef.current.value.trim() !== \"\"\r\n          ? inputNameDialogRef.current.value\r\n          : user.username,\r\n        message.text,\r\n        idGroup\r\n      );\r\n  }\r\n}\r\nexport default MessageInput;\r\n","import Input from \"../Input/Input\";\r\n\r\nimport \"./Chat.css\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { fromEvent } from \"rxjs\";\r\nimport { debounceTime, filter } from \"rxjs/operators\";\r\n\r\nimport { messageInputStream } from \"../../epics/message-input\";\r\nimport { theaterStream } from \"../../epics/theater\";\r\nimport MessageInput from \"../MessageInput/MessageInput\";\r\n\r\nconst socket = theaterStream.socket;\r\nlet messageDialogE;\r\nlet idGroup;\r\nlet isWithoutName;\r\nlet userGlobal;\r\nconst Chat = ({ groupId, user, withoutName = false, isZoom = false }) => {\r\n  idGroup = groupId;\r\n  userGlobal = user;\r\n  isWithoutName = withoutName;\r\n  const inputNameDialogRef = useRef();\r\n  const messageDialogRef = useRef();\r\n  const inputRefFile = useRef();\r\n  const buttonLikeRef = useRef();\r\n  const containerMessageChatBotRef = useRef(null);\r\n  const [errorName, setErrorName] = useState(null);\r\n  messageDialogE = messageDialogRef.current;\r\n  useEffect(() => {\r\n    messageDialogE = messageDialogRef.current;\r\n    user && !withoutName && (inputNameDialogRef.current.value = user.username);\r\n  }, [user, withoutName, isZoom]);\r\n  useEffect(() => {\r\n    messageDialogE = messageDialogRef.current;\r\n    if (!socket.connected) socket.connect();\r\n    messageInputStream.init();\r\n    const subscription = fromEvent(containerMessageChatBotRef.current, \"scroll\")\r\n      .pipe(\r\n        debounceTime(500),\r\n        filter(() => isInBottom())\r\n      )\r\n      .subscribe(() => {\r\n        messageInputStream.updateIsInBottomChatBot(true);\r\n        const buttonScroll = document.querySelector(\".button-scroll-bottom\");\r\n        buttonScroll.style.transform = \"translateY(-100px)\";\r\n      });\r\n    const subscription2 = fromEvent(\r\n      containerMessageChatBotRef.current,\r\n      \"scroll\"\r\n    )\r\n      .pipe(\r\n        debounceTime(500),\r\n        filter(() => !isInBottom())\r\n      )\r\n      .subscribe(() => {\r\n        messageInputStream.updateIsInBottomChatBot(false);\r\n      });\r\n    return () => {\r\n      subscription.unsubscribe();\r\n      subscription2.unsubscribe();\r\n      socket.close();\r\n    };\r\n  }, []);\r\n  useEffect(() => {\r\n    messageDialogE = messageDialogRef.current;\r\n    let subscription;\r\n    if (buttonLikeRef.current) {\r\n      subscription = fromEvent(buttonLikeRef.current, \"click\")\r\n        .pipe(debounceTime(500))\r\n        .subscribe(() => {\r\n          if (messageDialogE) {\r\n            if (user) {\r\n              if (inputNameDialogRef.current) {\r\n                if (inputNameDialogRef.current.value.trim() !== \"\") {\r\n                  setErrorName(null);\r\n                  appendNewMessageDialog(\r\n                    `<i class=\"fas fa-thumbs-up fa-3x button-like\"></i>`,\r\n                    \"you\",\r\n                    true,\r\n                    messageDialogE,\r\n                    user.avatarImage\r\n                  );\r\n                  socket.emit(\r\n                    \"new-message\",\r\n                    inputNameDialogRef.current.value,\r\n                    `<i class=\"fas fa-thumbs-up fa-3x button-like\"></i>`,\r\n                    idGroup,\r\n                    user.avatarImage\r\n                  );\r\n                } else {\r\n                  setErrorName(\"please type in your name\");\r\n                }\r\n              } else {\r\n                appendNewMessageDialog(\r\n                  `<i class=\"fas fa-thumbs-up fa-3x button-like\"></i>`,\r\n                  \"you\",\r\n                  true,\r\n                  messageDialogE,\r\n                  user.avatarImage\r\n                );\r\n                socket.emit(\r\n                  \"new-message\",\r\n                  user.username,\r\n                  `<i class=\"fas fa-thumbs-up fa-3x button-like\"></i>`,\r\n                  idGroup,\r\n                  user.avatarImage\r\n                );\r\n              }\r\n            } else {\r\n              if (inputNameDialogRef.current.value.trim() !== \"\") {\r\n                setErrorName(null);\r\n                appendNewMessageDialog(\r\n                  `<i class=\"fas fa-thumbs-up fa-3x button-like\"></i>`,\r\n                  \"you\",\r\n                  true,\r\n                  messageDialogE\r\n                );\r\n\r\n                socket.emit(\r\n                  \"new-message\",\r\n                  inputNameDialogRef.current.value,\r\n                  `<i class=\"fas fa-thumbs-up fa-3x button-like\"></i>`,\r\n                  idGroup\r\n                );\r\n              } else setErrorName(\"Error: please type in your name\");\r\n            }\r\n          }\r\n        });\r\n    }\r\n    return () => {\r\n      subscription.unsubscribe();\r\n    };\r\n  }, [user]);\r\n  return (\r\n    <div className=\"container-chat-bot\">\r\n      <div className=\"container-popup-img\">\r\n        <img className=\"pop-up-active\" src=\"\" alt=\"\" />\r\n      </div>\r\n      <div className=\"block-pop-up\" style={{ display: \"none\" }}></div>\r\n      <div className={`chat-bot${isZoom ? \" chat-watch-zoom\" : \"\"}`}>\r\n        <div\r\n          className=\"button-scroll-bottom\"\r\n          onClick={() => {\r\n            scrollToBottom();\r\n          }}\r\n        >\r\n          <i className=\"fas fa-arrow-alt-circle-down fa-3x\"></i>\r\n        </div>\r\n        <div\r\n          className={`message-dialog-container${\r\n            isZoom ? \" transparent-background\" : \"\"\r\n          }`}\r\n        >\r\n          <div\r\n            className=\"container-message-chat-bot\"\r\n            ref={containerMessageChatBotRef}\r\n            style={{ backgroundColor: isZoom ? \"\" : \"black\" }}\r\n          >\r\n            <div\r\n              className={`message-dialog${\r\n                isZoom ? \" transparent-background\" : \"\"\r\n              }`}\r\n              ref={messageDialogRef}\r\n            >\r\n              <div className=\"flex-start-message message-dialog-item current-user-message\">\r\n                <span className=\"content-message\">\r\n                  Welcome to AnimeFun, enjoy and have a good day\r\n                </span>\r\n                <span className=\"username-message\">Robot</span>\r\n              </div>\r\n            </div>\r\n            {isWithoutName && (\r\n              <div className=\"notification-typing-theater-room\"></div>\r\n            )}\r\n            {!isWithoutName && (\r\n              <div className=\"notification-typing\">\r\n                <img\r\n                  className=\"image-dot\"\r\n                  src=\"https://support.signal.org/hc/article_attachments/360016877511/typing-animation-3x.gif\"\r\n                  alt=\"gif_3_dot\"\r\n                />\r\n                <div>Someone</div>\r\n              </div>\r\n            )}\r\n          </div>\r\n          {!withoutName && (\r\n            <Input\r\n              label={\"Name\"}\r\n              input={inputNameDialogRef}\r\n              error={errorName}\r\n            />\r\n          )}\r\n          <div className=\"input-message-dialog\">\r\n            <i\r\n              className=\"fas fa-thumbs-up fa-2x button-like\"\r\n              style={{ color: \"white\" }}\r\n              ref={buttonLikeRef}\r\n              onClick={() => {}}\r\n            ></i>\r\n            <i\r\n              className=\"fas fa-images fa-2x symbol-choose-picture\"\r\n              onClick={() => inputRefFile.current.click()}\r\n            ></i>\r\n            <MessageInput\r\n              appendNewMessageDialog={appendNewMessageDialog}\r\n              appendNewPhotoMessage={appendNewPhotoMessage}\r\n              inputNameDialogRef={inputNameDialogRef}\r\n              idGroup={idGroup}\r\n              socket={socket}\r\n              user={user}\r\n              messageDialogE={messageDialogE}\r\n              isWithoutName={isWithoutName}\r\n              setErrorName={setErrorName}\r\n            />\r\n            <input\r\n              multiple\r\n              type=\"file\"\r\n              ref={inputRefFile}\r\n              className=\"file-submit-input\"\r\n              onChange={async () => {\r\n                try {\r\n                  for (let i = 0; i < inputRefFile.current.files.length; i++) {\r\n                    if (\r\n                      inputRefFile.current.files[i].type.indexOf(\"image\") === -1\r\n                    ) {\r\n                      alert(\"Just image or gif\");\r\n                      continue;\r\n                    }\r\n                    const uri = await base64DataUrl(\r\n                      inputRefFile.current.files[i]\r\n                    );\r\n                    messageInputStream.updateImgsMessage(uri);\r\n                  }\r\n                  isZoom && allowFullscreen();\r\n                  inputRefFile.current.value = \"\";\r\n                } catch (error) {\r\n                  alert(error);\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// socket.on(\"user-join\", (username, userId, roomId, avatarImage) => {\r\n//   if (roomId !== idGroup) {\r\n//     return;\r\n//   }\r\n//   appendNewMessageDialog(\r\n//     `NOTIFICATION: ${username} joined`,\r\n//     \"Robot\",\r\n//     false,\r\n//     messageDialogE,\r\n//     avatarImage\r\n//   );\r\n// });\r\n\r\n// socket.on(\r\n//   \"disconnected-user\",\r\n//   async (username, userId, roomId, avatarImage) => {\r\n//     if (roomId !== idGroup || !isWithoutName) {\r\n//       return;\r\n//     }\r\n//     appendNewMessageDialog(\r\n//       `NOTIFICATION: ${username} left`,\r\n//       \"Robot\",\r\n//       false,\r\n//       messageDialogE,\r\n//       avatarImage\r\n//     );\r\n//   }\r\n// );\r\n\r\nsocket.on(\"send-message-other-users\", (username, message, groupId, avatar) => {\r\n  // console.log(username,\"sends\", groupId);\r\n  if (groupId === idGroup) {\r\n    appendNewMessageDialog(\r\n      message,\r\n      username,\r\n      false,\r\n      messageDialogE,\r\n      avatar ||\r\n        \"https://iupac.org/wp-content/uploads/2018/05/default-avatar.png\"\r\n    );\r\n    if (isWithoutName) {\r\n      appendNewUserSeen(avatar);\r\n      const chatBotE = document.querySelector(\".chat-bot\");\r\n      if (chatBotE && chatBotE.style.transform !== \"scale(0)\") {\r\n        socket.emit(\"new-user-seen\", userGlobal.avatarImage, groupId);\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\nsocket.on(\r\n  \"send-message-photo-other-users\",\r\n  (username, uri, groupId, avatar) => {\r\n    if (groupId === idGroup) {\r\n      appendNewPhotoMessage(\r\n        uri,\r\n        username,\r\n        false,\r\n        messageDialogE,\r\n        avatar ||\r\n          \"https://iupac.org/wp-content/uploads/2018/05/default-avatar.png\"\r\n      );\r\n      if (isWithoutName) {\r\n        appendNewUserSeen(avatar);\r\n        const chatBotE = document.querySelector(\".chat-bot\");\r\n        if (chatBotE && chatBotE.style.transform !== \"scale(0)\") {\r\n          socket.emit(\"new-user-seen\", userGlobal.avatarImage, groupId);\r\n        }\r\n      }\r\n    }\r\n  }\r\n);\r\n\r\nsocket.on(\"send-avatar-seen-user-to-other-user\", (avatar, groupId) => {\r\n  if (groupId === idGroup) {\r\n    if (isWithoutName) {\r\n      appendNewUserSeen(avatar);\r\n    }\r\n  }\r\n});\r\n\r\nsocket.on(\"new-user-typing\", (groupId, idTyping, username) => {\r\n  if (groupId === idGroup) {\r\n    if (!isWithoutName) {\r\n      if (document.querySelector(\".notification-typing\"))\r\n        document.querySelector(\".notification-typing\").style.display = \"block\";\r\n    } else {\r\n      appendNewUserTyping(idTyping, username);\r\n    }\r\n  }\r\n  if (messageInputStream.currentState())\r\n    if (messageInputStream.currentState().isInBottomChatBot) scrollToBottom();\r\n});\r\n\r\nsocket.on(\"eliminate-user-typing\", (groupId, idTyping) => {\r\n  if (groupId === idGroup) {\r\n    if (!isWithoutName) {\r\n      if (document.querySelector(\".notification-typing\"))\r\n        document.querySelector(\".notification-typing\").style.display = \"none\";\r\n    } else {\r\n      eliminateUserByIdTyping(idTyping);\r\n    }\r\n  }\r\n  if (messageInputStream.currentState().isInBottomChatBot) scrollToBottom();\r\n});\r\n\r\nfunction appendNewUserTyping(idTyping, username) {\r\n  const notificationTypingContainerElement = document.querySelector(\r\n    \".notification-typing-theater-room\"\r\n  );\r\n  if (!notificationTypingContainerElement) {\r\n    return;\r\n  }\r\n  const newNotification = document.createElement(\"div\");\r\n  newNotification.id = idTyping;\r\n  newNotification.className = \"notification-item-typing\";\r\n  const newImg = document.createElement(\"img\");\r\n  newImg.className = \"image-dot\";\r\n  newImg.src =\r\n    \"https://support.signal.org/hc/article_attachments/360016877511/typing-animation-3x.gif\";\r\n  newImg.alt = \"gif_3dot\";\r\n  const newUsername = document.createElement(\"div\");\r\n  newUsername.className = \"username-message\";\r\n  newUsername.innerText = `${username}`;\r\n  newNotification.append(newImg);\r\n  newNotification.append(newUsername);\r\n  if (notificationTypingContainerElement) {\r\n    notificationTypingContainerElement.append(newNotification);\r\n  }\r\n}\r\n\r\nfunction eliminateUserByIdTyping(idTyping) {\r\n  const notificationTypingContainerElement = document.querySelector(\r\n    \".notification-typing-theater-room\"\r\n  );\r\n  if (notificationTypingContainerElement) {\r\n    let listNotification = [...notificationTypingContainerElement.childNodes];\r\n    const elementMatchIndex = listNotification.find(\r\n      (element) => element.id === idTyping\r\n    );\r\n    if (elementMatchIndex) {\r\n      elementMatchIndex.remove();\r\n    }\r\n  }\r\n  if (messageInputStream.currentState().isInBottomChatBot) scrollToBottom();\r\n}\r\n\r\nfunction appendNewUserSeen(avatar) {\r\n  const allMessages = document.querySelector(\".message-dialog\");\r\n  if (!allMessages) {\r\n    return;\r\n  }\r\n  const elements = [...allMessages.childNodes];\r\n  let newSpanContainer =\r\n    elements[elements.length - 1].querySelector(\".seen-user\");\r\n  let add = false;\r\n  if (!newSpanContainer) {\r\n    add = true;\r\n    newSpanContainer = document.createElement(\"div\");\r\n    newSpanContainer.className = \"seen-user\";\r\n  }\r\n  const newSpan = document.createElement(\"span\");\r\n  const newImg = document.createElement(\"img\");\r\n  newImg.src = avatar;\r\n  newImg.alt = \"image_avatar\";\r\n  newSpan.append(newImg);\r\n  newSpanContainer.append(newSpan);\r\n  if (add) {\r\n    elements[elements.length - 1].append(newSpanContainer);\r\n  }\r\n}\r\n\r\nfunction allowFullscreen() {\r\n  document.querySelector(\"#root\").allowfullscreen = true;\r\n  if (document.querySelector(\"#root\").requestFullscreen) {\r\n    document\r\n      .querySelector(\"#root\")\r\n      .requestFullscreen()\r\n      .catch(() => {});\r\n  } else if (document.querySelector(\"#root\").webkitRequestFullScreen) {\r\n    document\r\n      .querySelector(\"#root\")\r\n      .webkitRequestFullScreen()\r\n      .catch(() => {});\r\n  } else if (document.querySelector(\"#root\").mozRequestFullScreen) {\r\n    document\r\n      .querySelector(\"#root\")\r\n      .mozRequestFullScreen()\r\n      .catch(() => {});\r\n  } else if (document.querySelector(\"#root\").msRequestFullScreen) {\r\n    document\r\n      .querySelector(\"#root\")\r\n      .msRequestFullScreen()\r\n      .catch(() => {});\r\n  }\r\n}\r\n\r\nfunction base64DataUrl(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onerror = function () {\r\n      reject(\"Your file is too big\");\r\n    };\r\n    reader.onload = function (ev) {\r\n      reader.error && reject(reader.error);\r\n      resolve(ev.target.result);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  });\r\n}\r\n\r\nfunction appendNewMessageDialog(\r\n  message,\r\n  username,\r\n  isYourMessage,\r\n  messageDialogContainerE = document.querySelector(\".message-dialog\"),\r\n  avatarImage = \"https://iupac.org/wp-content/uploads/2018/05/default-avatar.png\"\r\n) {\r\n  const newElement = document.createElement(\"div\");\r\n  const newSpanContentMessage = document.createElement(\"span\");\r\n  const newSpanUsernameMessage = document.createElement(\"p\");\r\n  const imageAvatarMessage = document.createElement(\"img\");\r\n  imageAvatarMessage.src = avatarImage;\r\n  imageAvatarMessage.className = \"avatar-user-chat\";\r\n  imageAvatarMessage.alt = \"avatar\";\r\n  if (!isYourMessage) {\r\n    newElement.className =\r\n      \"flex-start-message message-dialog-item current-user-message\";\r\n  } else {\r\n    newElement.className =\r\n      \"flex-end-message message-dialog-item other-user-message\";\r\n  }\r\n  newElement.append(imageAvatarMessage);\r\n  if (!/button-like/g.test(message))\r\n    newSpanContentMessage.className = \"content-message\";\r\n  const link = message.match(\r\n    /http[s]?:\\/\\/(?:[a-z]|[0-9]|[$-_@.&+]|[!*(),]|(?:%[0-9a-f][0-9a-f]))+/g\r\n  );\r\n  if (link) {\r\n    message = message.replace(\r\n      link[0],\r\n      `<a href=${link[0]} target=\"_blank\" style=\"color:white\">${link[0]}</a>`\r\n    );\r\n  }\r\n  newSpanContentMessage.innerHTML = `<p>${message}</p>`;\r\n  newSpanUsernameMessage.className = \"username-message\";\r\n  newSpanUsernameMessage.innerText = username;\r\n  newElement.append(newSpanContentMessage);\r\n  newElement.append(newSpanUsernameMessage);\r\n  messageDialogContainerE.append(newElement);\r\n  handleScrollingToBottom(isYourMessage);\r\n  const e = document.querySelector(\".chat-watch-zoom\");\r\n  if (e && e.style.transform === \"scale(0)\") {\r\n    const numMessage = theaterStream.currentState().unreadMessage;\r\n    theaterStream.updateData({\r\n      unreadMessage: numMessage + 1,\r\n    });\r\n  }\r\n}\r\n\r\nfunction handleScrollingToBottom(isYourMessage) {\r\n  if (!isYourMessage) {\r\n    if (messageInputStream.currentState()) {\r\n      if (messageInputStream.currentState().isInBottomChatBot) scrollToBottom();\r\n      else {\r\n        const buttonScroll = document.querySelector(\".button-scroll-bottom\");\r\n        if (buttonScroll) buttonScroll.style.transform = \"translateY(0)\";\r\n      }\r\n    }\r\n  } else scrollToBottom();\r\n}\r\n\r\nfunction isInBottom() {\r\n  const containerMessageChatBot = document.querySelector(\r\n    \".container-message-chat-bot\"\r\n  );\r\n  if (!containerMessageChatBot) return false;\r\n  const distance =\r\n    containerMessageChatBot.scrollHeight -\r\n    (containerMessageChatBot.scrollTop + containerMessageChatBot.offsetHeight);\r\n  return distance < 40;\r\n}\r\n\r\nfunction scrollToBottom() {\r\n  const containerChatBotMessage = document.querySelector(\r\n    \".container-message-chat-bot\"\r\n  );\r\n  if (containerChatBotMessage)\r\n    containerChatBotMessage.scroll({\r\n      top: containerChatBotMessage.scrollHeight,\r\n      behavior: \"smooth\",\r\n    });\r\n}\r\n\r\nfunction appendNewPhotoMessage(\r\n  uri,\r\n  username,\r\n  isYourMessage,\r\n  messageDialogContainerE = document.querySelector(\".message-dialog\"),\r\n  avatarImage = \"https://iupac.org/wp-content/uploads/2018/05/default-avatar.png\"\r\n) {\r\n  const newElement = document.createElement(\"div\");\r\n  const newSpanContentMessage = document.createElement(\"span\");\r\n  const newSpanUsernameMessage = document.createElement(\"p\");\r\n  const newImageAvatar = document.createElement(\"img\");\r\n  newImageAvatar.className = \"avatar-user-chat\";\r\n  newImageAvatar.src = avatarImage;\r\n  newImageAvatar.alt = \"avatar\";\r\n  if (!isYourMessage) {\r\n    newElement.className =\r\n      \"flex-start-message message-dialog-item current-user-message\";\r\n  } else {\r\n    newElement.className =\r\n      \"flex-end-message message-dialog-item other-user-message\";\r\n  }\r\n  newElement.append(newImageAvatar);\r\n  newSpanContentMessage.className = `pop-up`;\r\n  const popUpActiveContainer = document.querySelector(\".container-popup-img\");\r\n  const popUpActive = document.querySelector(\".pop-up-active\");\r\n  newSpanContentMessage.onclick = function (e) {\r\n    if (e.target.parentElement.className === \"pop-up\") {\r\n      document.querySelector(\".block-pop-up\").style.display = \"block\";\r\n      document.getElementsByTagName(\"body\").item(0).className = \"hidden-scroll\";\r\n      popUpActive.src = e.target.src;\r\n      popUpActive.width = e.target.naturalWidth;\r\n      popUpActive.height = e.target.naturalHeight;\r\n      popUpActiveContainer.style.transition = \"0.4s\";\r\n      popUpActiveContainer.style.display = \"flex\";\r\n      popUpActiveContainer.style.transform = \"scale(1)\";\r\n      popUpActiveContainer.style.opacity = \"1\";\r\n    }\r\n    document.onclick = function (ev) {\r\n      if (\r\n        !e.target.parentElement.contains(ev.target) &&\r\n        document.querySelector(\".block-pop-up\")\r\n      ) {\r\n        document.querySelector(\".block-pop-up\").style.display = \"none\";\r\n        document.getElementsByTagName(\"body\").item(0).className = \"\";\r\n        popUpActive.src = \"\";\r\n        e.target.parentElement.className = \"pop-up\";\r\n        popUpActiveContainer.style.opacity = \"0\";\r\n        popUpActiveContainer.style.transition = \"0s\";\r\n        popUpActiveContainer.style.transform = \"scale(0)\";\r\n      }\r\n    };\r\n  };\r\n  newSpanContentMessage.innerHTML = `<img width=\"100%\" height=\"100%\" src=${uri} alt=\"image_photo\"/>`;\r\n  newSpanUsernameMessage.className = \"username-message\";\r\n  newSpanUsernameMessage.innerText = username;\r\n  newElement.append(newSpanContentMessage);\r\n  newElement.append(newSpanUsernameMessage);\r\n  messageDialogContainerE.append(newElement);\r\n  handleScrollingToBottom(isYourMessage);\r\n  const e = document.querySelector(\".chat-watch-zoom\");\r\n  if (e && e.style.transform === \"scale(0)\") {\r\n    const numMessage = theaterStream.currentState().unreadMessage;\r\n    theaterStream.updateData({\r\n      unreadMessage: numMessage + 1,\r\n    });\r\n  }\r\n}\r\n\r\nexport default Chat;\r\n"],"sourceRoot":""}