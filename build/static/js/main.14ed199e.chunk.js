(this["webpackJsonpmy-app-2"]=this["webpackJsonpmy-app-2"]||[]).push([[6],{22:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return l}));var n=a(53),r=a(83),o=a(101),c=a(102),i=a(100),s=a(74).a,l=function(e){return Object(o.a)({headers:{authorization:"Bearer ".concat(e||"")},method:"GET",url:"/api"}).pipe(Object(c.a)(1e3,n.b,{leading:!0,trailing:!0}),Object(i.a)((function(e){return s.updateUser(s.initialState),Object(r.a)({error:e})})))}},44:function(e,t,a){"use strict";var n=a(30),r=new(a(75).a),o={isShowBlockPopUp:!1,isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}()},c=o,i={initialState:o,init:function(){r.next(c)},subscribe:function(e){return r.subscribe((function(t){return e(t)}))},currentState:function(){var e;return r.subscribe((function(t){e=t})),e||o},updateIsShowBlockPopUp:function(e){c=Object(n.a)(Object(n.a)({},c),{},{isShowBlockPopUp:e}),r.next(c)}};t.a=i},74:function(e,t,a){"use strict";var n=a(30),r=new(a(75).a),o=void 0,c={initialState:void 0,currentState:function(){var e;return r.subscribe((function(t){return e=t})),e||void 0},subscribe:function(e){return r.subscribe((function(t){return e(t)}))},init:function(){return r.next(o)},updateUser:function(e){o=e,r.next(o)},updateAvatarUser:function(e){o=Object(n.a)(Object(n.a)({},o),{},{avatarImage:e}),r.next(o)},resetUser:function(){o=void 0,r.next(o)}};t.a=c},86:function(e,t,a){e.exports=a(99)},91:function(e,t,a){},92:function(e,t,a){},95:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(68),c=a.n(o),i=(a(91),a(26)),s=(a(92),a(7)),l=a(119),u=a(121),m=a(120),d=a(3),p=a(13),f=a(18),b=a.n(f),h=a(36),v=(a(95),a(22)),g=a(107);function w(e,t){return y.apply(this,arguments)}function y(){return(y=Object(h.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/users/logout",{method:"DELETE",headers:{authorization:"Bearer ".concat(a)}});case 3:t("idCartoonUser",{path:"/"}),v.b.updateUser(void 0),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function E(e){return k.apply(this,arguments)}function k(){return(k=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var n=new FileReader;n.onload=function(t){e(t)},n.onerror=function(e){a(e)},n.readAsDataURL(t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=Object(d.g)((function(e){var t=e.userState,a=e.removeCookie,o=e.cookies,c=Object(n.useState)(!1),s=Object(i.a)(c,2),l=s[0],u=s[1],m=Object(n.useState)(!1),f=Object(i.a)(m,2),y=f[0],k=f[1],x=Object(n.useRef)(),j=Object(n.useRef)(),O=Object(n.useRef)(),C=Object(d.f)(),N=Object(n.useRef)(),z=Object(n.useRef)(),_=Object(n.useRef)(0),S=Object(n.useRef)(0);return Object(n.useEffect)((function(){document.body.offsetWidth>1186?k(!1):k(!0);var e=Object(g.a)(window,"resize").subscribe((function(){document.body.offsetWidth>1186?k(!1):k(!0)})),t=Object(g.a)(window,"scroll").subscribe((function(){S.current=_.current-window.scrollY,window.scrollY<50&&(N.current.style.transform="translateY(0)",N.current.style.backgroundColor="rgba(2, 2, 2)",O.current.style.transform="translateY(500px)"),_.current&&(S.current<-1&&window.scrollY>=50&&(N.current.style.transform="translateY(-500px)","flex"!==z.current.style.display&&document.body.offsetWidth<=1186&&(N.current.style.backgroundColor="rgba(2, 2, 2, 0.3)"),"flex"===z.current.style.display&&document.body.offsetWidth<=1186&&(z.current.style.display="none"),document.body.offsetWidth>1186&&(N.current.style.backgroundColor="rgba(2, 2, 2, 0.3)"),O.current.style.transform="translateY(500px)"),S.current>1&&window.scrollY>=50&&(N.current.style.transform="translateY(0)",O.current.style.transform="translateY(0)","flex"!==z.current.style.display&&(N.current.style.backgroundColor="rgba(2, 2, 2, 0.3)"))),_.current=window.scrollY}));return function(){e.unsubscribe(),t.unsubscribe()}}),[]),r.a.createElement("nav",{className:"nav-bar"},r.a.createElement("div",{ref:O,className:"button-scroll-top",onClick:function(){window.scroll({top:0,behavior:"smooth"})}},r.a.createElement("i",{className:"fas fa-arrow-up fa-2x"})),r.a.createElement("ul",{className:"nav-bar__app",ref:N,onMouseMove:function(){N.current.style.backgroundColor="black"},onMouseLeave:function(){window.scrollY>=50&&(N.current.style.backgroundColor="rgb(2,2,2,0.2)")}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"0.3rem"}},r.a.createElement("div",{className:"logo",onClick:function(){u(!1)}},r.a.createElement(p.c,{to:"/"},r.a.createElement("div",{className:"logo-wrapper"},r.a.createElement("img",{src:"https://myanimefun.herokuapp.com/logo192.png",width:50,height:50,alt:""}),r.a.createElement("span",null,"MyAnimeFun")))),r.a.createElement("div",{className:"toggle-show__nav",style:{backgroundColor:"transparent"},onClick:function(){u(!l)}},r.a.createElement("i",{className:"fas fa-bars fa-2x"}))),r.a.createElement("ul",{ref:z,className:"child-nav-bar__app",style:{display:!y||l?"flex":"none"}},r.a.createElement("li",{className:"left-nav-item nav-bar__item",onClick:function(){u(!1)}},r.a.createElement(p.c,{to:"/",activeClassName:"active",exact:!0},"Home")),r.a.createElement("li",{className:"nav-bar__item",onClick:function(){u(!1)}},r.a.createElement(p.c,{to:"/storage",activeClassName:"active",exact:!0},"Storage")),t&&"Admin"===t.role&&r.a.createElement("li",{className:"nav-bar__item",onClick:function(){u(!1)}},r.a.createElement(p.c,{to:"/requests",activeClassName:"active"},"Request")),t&&"Admin"===t.role&&r.a.createElement("li",{className:"nav-bar__item"},r.a.createElement(p.c,{to:"/admin",activeClassName:"active"},"Admin")),r.a.createElement("li",{className:"nav-bar__item",onClick:function(){u(!1)}},t&&r.a.createElement(p.c,{to:"/theater",activeClassName:"active"},"Theater"),!t&&r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){alert("Require Login")}},"Theater")),r.a.createElement("li",{style:{color:"white",cursor:"pointer"},className:"nav-bar__item",onClick:function(){u(!1)}},r.a.createElement(p.c,{to:"/faq",activeClassName:"active"},"FAQ")),r.a.createElement("li",{className:"nav-bar__item",ref:x,onClick:function(){u(!1)}},!t&&r.a.createElement(p.c,{to:"/auth/login",activeClassName:"active"},"Login"),t&&r.a.createElement("div",{style:{color:"white",cursor:"pointer",display:"inline",padding:"10px"},onClick:Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(a,o.idCartoonUser);case 2:C.push("/auth/login");case 3:case"end":return e.stop()}}),e)})))},"Logout")),!t&&r.a.createElement("li",{ref:j,className:"nav-bar__item",onClick:function(){u(!1)}},r.a.createElement(p.c,{to:"/auth/register",activeClassName:"active"},"Register")),t&&r.a.createElement("li",{style:{color:"white",cursor:"pointer"},className:"nav-bar__item",onClick:function(){u(!1)}},r.a.createElement(p.c,{to:"/edit"},t.username)),t&&r.a.createElement("li",{className:"nav-bar__item",onClick:function(){u(!1)}},r.a.createElement("div",{style:{color:"white",cursor:"pointer",display:"inline"}},r.a.createElement("img",{className:"avatar-user",src:t.avatarImage?t.avatarImage:"https://iupac.org/wp-content/uploads/2018/05/default-avatar.png",alt:"avatar_user",onClick:function(){document.querySelector(".input-choose-avatar").click()}}),r.a.createElement("input",{className:"input-choose-avatar",type:"file",onChange:function(){var e=Object(h.a)(b.a.mark((function e(t){var a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,["image/png","image/jpeg","image/gif"].includes(t.target.files[0].type)){e.next=3;break}return e.abrupt("return",alert("You just can upload image"));case 3:return e.next=5,E(t.target.files[0]);case 5:return a=e.sent,e.next=8,fetch("/api/users/current/avatar",{method:"PUT",body:JSON.stringify({avatarImage:a.target.result}),headers:{authorization:"Bearer ".concat(o.idCartoonUser),"Content-Type":"application/json"}});case 8:return n=e.sent,e.next=11,n.json();case 11:if(!(r=e.sent).error){e.next=14;break}throw Error(r.error);case 14:v.b.updateAvatarUser(r.message),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}()}))))))})),j=a(44),O=Object(s.a)((function(){return a.e(33).then(a.bind(null,349))}),{fallback:r.a.createElement("section",{style:{position:"fixed",width:"100%",zIndex:"2000"}},r.a.createElement(u.a,{color:"secondary"}))}),C=Object(s.a)((function(){return a.e(62).then(a.bind(null,322))}),{fallback:r.a.createElement("section",{style:{position:"fixed",width:"100%",zIndex:"2000"}},r.a.createElement(u.a,{color:"secondary"}))}),N=Object(s.a)((function(){return a.e(26).then(a.bind(null,323))}),{fallback:r.a.createElement("section",{style:{position:"fixed",width:"100%",zIndex:"2000"}},r.a.createElement(u.a,{color:"secondary"}))}),z=Object(s.a)((function(){return a.e(27).then(a.bind(null,324))}),{fallback:r.a.createElement("section",{style:{position:"fixed",width:"100%",zIndex:"2000"}},r.a.createElement(u.a,{color:"secondary"}))}),_=Object(s.a)((function(){return a.e(64).then(a.bind(null,325))}),{fallback:r.a.createElement("section",{style:{position:"fixed",width:"100%",zIndex:"2000"}},r.a.createElement(u.a,{color:"secondary"}))}),S=Object(s.a)((function(){return a.e(50).then(a.bind(null,326))}),{fallback:r.a.createElement("section",{style:{position:"fixed",width:"100%",zIndex:"2000"}},r.a.createElement(u.a,{color:"secondary"}))}),I=Object(s.a)((function(){return a.e(28).then(a.bind(null,327))}),{fallback:r.a.createElement("section",{style:{position:"fixed",width:"100%",zIndex:"2000"}},r.a.createElement(u.a,{color:"secondary"}))}),U=Object(s.a)((function(){return a.e(17).then(a.bind(null,350))}),{fallback:r.a.createElement("section",{style:{position:"fixed",width:"100%",zIndex:"2000"}},r.a.createElement(u.a,{color:"secondary"}))}),A=Object(s.a)((function(){return a.e(61).then(a.bind(null,328))}),{fallback:r.a.createElement("section",{style:{position:"fixed",width:"100%",zIndex:"2000"}},r.a.createElement(u.a,{color:"secondary"}))}),R=Object(s.a)((function(){return a.e(36).then(a.bind(null,329))}),{fallback:r.a.createElement("section",{style:{position:"fixed",width:"100%",zIndex:"2000"}},r.a.createElement(u.a,{color:"secondary"}))}),P=Object(s.a)((function(){return Promise.all([a.e(1),a.e(3),a.e(31)]).then(a.bind(null,346))}),{fallback:r.a.createElement("section",{style:{position:"fixed",width:"100%",zIndex:"2000"}},r.a.createElement(u.a,{color:"secondary"}))}),B=Object(s.a)((function(){return Promise.all([a.e(0),a.e(3),a.e(13)]).then(a.bind(null,330))}),{fallback:r.a.createElement("section",{style:{position:"fixed",width:"100%",zIndex:"2000"}},r.a.createElement(u.a,{color:"secondary"}))}),W=Object(s.a)((function(){return Promise.all([a.e(2),a.e(19)]).then(a.bind(null,351))}),{fallback:r.a.createElement("section",{style:{position:"fixed",width:"100%",zIndex:"2000"}},r.a.createElement(u.a,{color:"secondary"}))}),Y=Object(s.a)((function(){return Promise.all([a.e(1),a.e(2),a.e(32)]).then(a.bind(null,331))}),{fallback:r.a.createElement("section",{style:{position:"fixed",width:"100%",zIndex:"2000"}},r.a.createElement(u.a,{color:"secondary"}))}),q=Object(s.a)((function(){return a.e(25).then(a.bind(null,353))}),{fallback:r.a.createElement("section",{style:{position:"fixed",width:"100%",zIndex:"2000"}},r.a.createElement(u.a,{color:"secondary"}))}),T=Object(s.a)((function(){return a.e(12).then(a.bind(null,332))}),{fallback:r.a.createElement("section",{style:{position:"fixed",width:"100%",zIndex:"2000"}},r.a.createElement(u.a,{color:"secondary"}))});var L=function(){var e=Object(n.useState)(v.b.currentState()),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(m.a)(["idCartoonUser"]),s=Object(i.a)(c,3),u=s[0],f=s[2],b=Object(n.useState)(j.a.initialState),h=Object(i.a)(b,2),g=h[0],w=h[1],y=Object(d.f)();return Object(n.useEffect)((function(){var e=v.b.subscribe(o),t=j.a.subscribe(w);return fetch("https://web-rtc-myanimefun.herokuapp.com"),function(){e.unsubscribe(),t.unsubscribe()}}),[]),Object(n.useEffect)((function(){j.a.init(),g.isShowBlockPopUp?document.getElementsByTagName("body").item(0).className="hidden-scroll":document.getElementsByTagName("body").item(0).className=""}),[g.isShowBlockPopUp]),Object(n.useEffect)((function(){var e=Object(v.a)(u.idCartoonUser).subscribe((function(e){e.error||v.b.updateUser(e.response.message)}));return function(){e.unsubscribe()}}),[u.idCartoonUser]),r.a.createElement(p.a,{history:y},g.isShowBlockPopUp&&r.a.createElement("div",{className:"block-pop-up"},r.a.createElement("div",{className:"loading-block"},r.a.createElement(l.a,{color:"secondary",size:"10rem"}))),r.a.createElement(x,{userState:a,removeCookie:f,cookies:u}),r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",component:R,exact:!0}),r.a.createElement(d.a,{path:"/storage/vertical",component:_}),r.a.createElement(d.a,{path:"/storage",component:C,exact:!0}),r.a.createElement(d.a,{path:"/faq",component:S}),r.a.createElement(d.a,{path:"/anime/search",component:q}),r.a.createElement(d.a,{path:"/anime/:malId/watch/:episode/:mode",component:Y}),r.a.createElement(d.a,{path:"/person/:personId",component:T}),r.a.createElement(d.a,{path:"/character/:characterId",component:B}),r.a.createElement(d.a,{path:"/anime/:name",component:P}),r.a.createElement(d.a,{path:"/manga/:name",component:P}),a&&"Admin"===a.role&&r.a.createElement(d.a,{path:"/admin",component:U,exact:!0}),a&&r.a.createElement(d.a,{path:"/theater",component:W}),a&&r.a.createElement(d.a,{path:"/edit",component:I}),a&&r.a.createElement(d.a,{path:"/requests",component:O}),!a&&r.a.createElement(d.a,{path:"/auth/login",component:N}),!a&&r.a.createElement(d.a,{path:"/auth/register",component:z}),r.a.createElement(d.a,{path:"/*",component:A})))},M=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function F(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");M?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):F(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):F(t,e)}))}}()}},[[86,7,8]]]);
//# sourceMappingURL=main.14ed199e.chunk.js.map