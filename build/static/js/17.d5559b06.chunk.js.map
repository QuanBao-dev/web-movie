{"version":3,"sources":["../../../../src/internal/observable/from.ts","../../../../src/internal/util/isNumeric.ts","../../../../src/internal/operators/mergeMap.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../../../../src/internal/scheduled/scheduled.ts","../../../../src/internal/util/isInteropObservable.ts","../../../../src/internal/scheduled/scheduleObservable.ts","../../../../src/internal/scheduled/schedulePromise.ts","../../../../src/internal/util/isIterable.ts","../../../../src/internal/scheduled/scheduleIterable.ts","../../../../src/internal/operators/pluck.ts","../../../../src/internal/observable/timer.ts","../../../../src/internal/observable/combineLatest.ts","../../../src/internal/OuterSubscriber.ts","../../../src/internal/InnerSubscriber.ts","../../../../src/internal/util/subscribeToResult.ts","../../../../src/internal/operators/mergeAll.ts","../../../../src/internal/observable/concat.ts","../../../../src/internal/operators/concatAll.ts","../../../../src/internal/operators/combineAll.ts","../../../../src/internal/operators/exhaustMap.ts","../../../../src/internal/operators/startWith.ts","store/admin.js","epics/admin.js","pages/AdminManager/AdminManager.js"],"names":["from","input","scheduler","Observable","isNumeric","val","concurrent","resultSelector","source","MergeMapOperator","MergeMapSubscriber","destination","project","Number","_this","_super","_next","value","push","_tryNext","result","index","error","err","active","_innerSub","innerSubscriber","innerSubscription","hasCompleted","unsubscribe","prototype","notifyNext","notifyComplete","buffer","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","unsupportedIterableToArray","TypeError","scheduled","isInteropObservable","subscriber","sub","add","schedule","observable","next","complete","Subscription","Symbol_iterator","done","_i","length","plucker","props","x","i","p","currentProp","undefined","dueTime","period","periodOrScheduler","async","dispatch","state","closed","isScheduler","observables","CombineLatestOperator","call","CombineLatestSubscriber","tslib_1","values","NONE","_complete","len","toRespond","oldVal","innerValue","OuterSubscriber","notifyError","InnerSubscriber","parent","outerValue","outerIndex","concatAll","combineAll","exhaustMap","ExhaustMapOperator","ExhaustMapSubscriber","hasSubscription","SimpleInnerSubscriber","array","behaviorSubject","BehaviorSubject","initialState","users","shouldFetchAllUsers","usersFilter","allowShouldFetchAllUser","bool","adminStore","subscribe","setState","v","currentState","ans","init","updateUsers","data","updateUsersFilter","adminStream","filterUsers","dataFilter","userFilter","username","filter","user","RegExp","test","role","dateStart","Date","getTime","createdAt","dateEnd","createDataFilter","elementUsername","elementRole","elementDateStart","elementDateEnd","AdminManager","useCookies","cookies","useState","adminState","setAdminState","toggleState","setToggleState","usernameRef","useRef","roleRef","dateStartRef","dateEndRef","useEffect","document","querySelector","style","display","fetchUsersSub","idCartoonUser","listenChangeFilterSub","subscription","timer","pipe","ajax","url","headers","authorization","pluck","catchError","of","userStore","resetUser","current","usernameElement","roleElement","dateStartElement","dateEndElement","source$","map","element","fromEvent","startWith","eventUsername","eventRole","eventDateStart","eventDateEnd","target","keys","listenChangeFilter$","className","justifyContent","margin","defaultValue","onChange","e","type","ref","key","email","toUTCString","onClick","a","temp","fetch","_id","method","splice"],"mappings":"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","file":"static/js/17.d5559b06.chunk.js","sourcesContent":[null,null,null,"import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"import { BehaviorSubject } from \"rxjs\";\r\nconst behaviorSubject = new BehaviorSubject();\r\nconst initialState = {\r\n  users: [],\r\n  shouldFetchAllUsers: true,\r\n  usersFilter:[],\r\n};\r\n\r\nlet state = initialState;\r\n\r\nconst adminStore = {\r\n  initialState,\r\n  subscribe: (setState) => behaviorSubject.subscribe((v) => setState(v)),\r\n  currentState: () => {\r\n    let ans;\r\n    behaviorSubject.subscribe((v) => {\r\n      ans = v;\r\n    });\r\n    return ans;\r\n  },\r\n  init: () => {\r\n    behaviorSubject.next(state);\r\n  },\r\n  updateUsers: (data) => {\r\n    state = {\r\n      ...state,\r\n      users: [...data],\r\n    };\r\n    behaviorSubject.next(state);\r\n  },\r\n\r\n  updateUsersFilter: (data) => {\r\n    state = {\r\n      ...state,\r\n      usersFilter: [...data],\r\n    };\r\n    behaviorSubject.next(state);\r\n  },\r\n};\r\n\r\nexport const allowShouldFetchAllUser = (bool) => {\r\n  state.shouldFetchAllUsers = bool;\r\n};\r\n\r\nexport default adminStore;\r\n","import adminStore from \"../store/admin\";\r\nimport { timer, from, of, fromEvent } from \"rxjs\";\r\nimport {\r\n  map,\r\n  pluck,\r\n  combineAll,\r\n  startWith,\r\n  catchError,\r\n  exhaustMap,\r\n} from \"rxjs/operators\";\r\nimport { ajax } from \"rxjs/ajax\";\r\nexport const adminStream = adminStore;\r\n\r\nexport const listenChangeFilter$ = (\r\n  usernameElement,\r\n  roleElement,\r\n  dateStartElement,\r\n  dateEndElement,\r\n  users\r\n) => {\r\n  const listElement = [\r\n    usernameElement,\r\n    roleElement,\r\n    dateStartElement,\r\n    dateEndElement,\r\n  ];\r\n  const source$ = listElement.map((element) => {\r\n    return fromEvent(element, \"change\").pipe(startWith(\"\"));\r\n  });\r\n  return from(source$).pipe(\r\n    combineAll(),\r\n    map(([eventUsername, eventRole, eventDateStart, eventDateEnd]) => {\r\n      let dataFilter = createDataFilter(\r\n        eventUsername.target,\r\n        eventRole.target,\r\n        eventDateStart.target,\r\n        eventDateEnd.target\r\n      );\r\n      let userFilter = filterUsers(users, dataFilter);\r\n      if (Object.keys(dataFilter).length !== 0) {\r\n        adminStream.updateUsersFilter(userFilter);\r\n      }\r\n      return userFilter;\r\n    })\r\n  );\r\n};\r\n\r\nexport const fetchAllUsers$ = (idCartoonUser) => {\r\n  return timer(0).pipe(\r\n    exhaustMap(() =>\r\n      ajax({\r\n        url: \"/api/users\",\r\n        headers: {\r\n          authorization: `Bearer ${idCartoonUser}`,\r\n        },\r\n      }).pipe(\r\n        pluck(\"response\", \"message\"),\r\n        catchError((error) => {\r\n          return of({ error });\r\n        })\r\n      )\r\n    )\r\n  );\r\n};\r\nexport function filterUsers(users, dataFilter) {\r\n  let userFilter = [...users];\r\n  if (dataFilter.username) {\r\n    userFilter = userFilter.filter((user) =>\r\n      new RegExp(dataFilter.username, \"i\").test(user.username)\r\n    );\r\n  }\r\n  if (dataFilter.role) {\r\n    userFilter = userFilter.filter((user) => {\r\n      return user.role === dataFilter.role;\r\n    });\r\n  }\r\n  if (dataFilter.dateStart) {\r\n    userFilter = userFilter.filter(\r\n      (user) =>\r\n        new Date(dataFilter.dateStart).getTime() <=\r\n        new Date(user.createdAt).getTime()\r\n    );\r\n  }\r\n  if (dataFilter.dateEnd) {\r\n    userFilter = userFilter.filter(\r\n      (user) =>\r\n        new Date(dataFilter.dateEnd).getTime() >=\r\n        new Date(user.createdAt).getTime()\r\n    );\r\n  }\r\n  return userFilter;\r\n}\r\n\r\nexport function createDataFilter(\r\n  elementUsername,\r\n  elementRole,\r\n  elementDateStart,\r\n  elementDateEnd\r\n) {\r\n  let dataFilter = {};\r\n  if (elementUsername) {\r\n    dataFilter = { ...dataFilter, username: elementUsername.value };\r\n  }\r\n  if (elementRole) {\r\n    dataFilter = { ...dataFilter, role: elementRole.value };\r\n  }\r\n  if (elementDateStart) {\r\n    dataFilter = { ...dataFilter, dateStart: elementDateStart.value };\r\n  }\r\n  if (elementDateEnd) {\r\n    dataFilter = { ...dataFilter, dateEnd: elementDateEnd.value };\r\n  }\r\n  return dataFilter;\r\n}\r\n","import \"./AdminManager.css\";\r\n\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\n\r\nimport {\r\n  adminStream,\r\n  createDataFilter,\r\n  fetchAllUsers$,\r\n  filterUsers,\r\n  listenChangeFilter$,\r\n} from \"../../epics/admin\";\r\nimport { allowShouldFetchAllUser } from \"../../store/admin\";\r\nimport userStore from \"../../store/user\";\r\n\r\nconst AdminManager = () => {\r\n  const [cookies] = useCookies([\"idCartoonUser\"]);\r\n  const [adminState, setAdminState] = useState(adminStream.initialState);\r\n  const [toggleState, setToggleState] = useState(\"all\");\r\n  const usernameRef = useRef();\r\n  const roleRef = useRef();\r\n  const dateStartRef = useRef();\r\n  const dateEndRef = useRef();\r\n  useEffect(() => {\r\n    const buttonScrollTopE = document.querySelector(\".button-scroll-top\");\r\n    buttonScrollTopE.style.display = \"block\";\r\n    const subscription = adminStream.subscribe(setAdminState);\r\n    adminStream.init();\r\n    let fetchUsersSub;\r\n    if (adminState.shouldFetchAllUsers) {\r\n      fetchUsersSub = fetchAllUsers$(cookies.idCartoonUser).subscribe((v) => {\r\n        if (!v.error) {\r\n          adminStream.updateUsers(v);\r\n          allowShouldFetchAllUser(false);\r\n          const dataFilter = createDataFilter(\r\n            usernameRef.current,\r\n            roleRef.current,\r\n            dateStartRef.current,\r\n            dateEndRef.current\r\n          );\r\n          let userFilter = filterUsers(v, dataFilter);\r\n          adminStream.updateUsersFilter(userFilter);\r\n        } else {\r\n          userStore.resetUser();\r\n        }\r\n      });\r\n    }\r\n    let listenChangeFilterSub;\r\n    if (toggleState === \"filter\") {\r\n      listenChangeFilterSub = listenChangeFilter$(\r\n        usernameRef.current,\r\n        roleRef.current,\r\n        dateStartRef.current,\r\n        dateEndRef.current,\r\n        adminState.users\r\n      ).subscribe();\r\n    }\r\n    return () => {\r\n      subscription.unsubscribe();\r\n      if (fetchUsersSub) {\r\n        fetchUsersSub.unsubscribe();\r\n      }\r\n      if (listenChangeFilterSub) {\r\n        listenChangeFilterSub.unsubscribe();\r\n      }\r\n    };\r\n  }, [\r\n    adminState.shouldFetchAllUsers,\r\n    adminState.users,\r\n    cookies.idCartoonUser,\r\n    toggleState,\r\n  ]);\r\n  // console.log(adminState, toggleState);\r\n  return (\r\n    <div className=\"container-admin-session\">\r\n      <div\r\n        style={{ display: \"flex\", justifyContent: \"center\", margin: \"1rem\" }}\r\n      >\r\n        <select\r\n          defaultValue=\"all\"\r\n          onChange={(e) => {\r\n            if (e.target.value === \"all\") {\r\n              allowShouldFetchAllUser(true);\r\n            }\r\n            setToggleState(e.target.value);\r\n          }}\r\n        >\r\n          <option value=\"all\">Show all</option>\r\n          <option value=\"filter\">Filter</option>\r\n        </select>\r\n      </div>\r\n      {toggleState === \"filter\" && (\r\n        <div className=\"filter-section\">\r\n          <div className=\"filter-bar-controller\">\r\n            <div className=\"m-1\">\r\n              <label>Username: </label>\r\n              <input type=\"text\" ref={usernameRef} />\r\n            </div>\r\n            <div className=\"m-1\">\r\n              <label>Role: </label>\r\n              <select ref={roleRef}>\r\n                <option value=\"\">All</option>\r\n                <option value=\"Admin\">Admin</option>\r\n                <option value=\"User\">User</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"m-1\">\r\n              <label>Date start: </label>\r\n              <input type=\"Date\" ref={dateStartRef} />\r\n            </div>\r\n            <div className=\"m-1\">\r\n              <label>Date end: </label>\r\n              <input type=\"Date\" ref={dateEndRef} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <table className=\"table-user-session\">\r\n        <thead>\r\n          <tr>\r\n            <th>Email</th>\r\n            <th>Username</th>\r\n            <th>Role</th>\r\n            <th>CreatedAt</th>\r\n            <th>Control</th>\r\n          </tr>\r\n        </thead>\r\n        {toggleState === \"all\" &&\r\n          adminState.users &&\r\n          adminState.users.map((user, index) => {\r\n            return (\r\n              <tbody key={index}>\r\n                <tr>\r\n                  <td>{user.email}</td>\r\n                  <td>{user.username}</td>\r\n                  <td>{user.role}</td>\r\n                  <td>{new Date(user.createdAt).toUTCString()}</td>\r\n                  {user && user.role === \"User\" && (\r\n                    <td>\r\n                      <button\r\n                        onClick={async () => {\r\n                          try {\r\n                            let temp = [...adminState.users];\r\n                            await fetch(`/api/users/${user._id}`, {\r\n                              method: \"DELETE\",\r\n                              headers: {\r\n                                authorization: `Bearer ${cookies.idCartoonUser}`,\r\n                              },\r\n                            });\r\n                            temp.splice(index, 1);\r\n                            adminStream.updateUsers(temp);\r\n                            allowShouldFetchAllUser(true);\r\n                          } catch (error) {}\r\n                        }}\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    </td>\r\n                  )}\r\n                </tr>\r\n              </tbody>\r\n            );\r\n          })}\r\n        {toggleState === \"filter\" &&\r\n          adminState.usersFilter &&\r\n          adminState.usersFilter.map((user, index) => {\r\n            return (\r\n              <tbody key={index}>\r\n                <tr>\r\n                  <td>{user.email}</td>\r\n                  <td>{user.username}</td>\r\n                  <td>{user.role}</td>\r\n                  <td>{new Date(user.createdAt).toUTCString()}</td>\r\n                  {user && user.role === \"User\" && (\r\n                    <td>\r\n                      <button\r\n                        onClick={async () => {\r\n                          try {\r\n                            let temp = [...adminState.users];\r\n                            await fetch(`/api/users/${user._id}`, {\r\n                              method: \"DELETE\",\r\n                              headers: {\r\n                                authorization: `Bearer ${cookies.idCartoonUser}`,\r\n                              },\r\n                            });\r\n                            allowShouldFetchAllUser(true);\r\n                            const dataFilter = createDataFilter(\r\n                              usernameRef.current,\r\n                              roleRef.current,\r\n                              dateStartRef.current,\r\n                              dateEndRef.current\r\n                            );\r\n                            // console.log(dataFilter);\r\n                            let userFilter = filterUsers(temp, dataFilter);\r\n                            adminStream.updateUsersFilter(userFilter);\r\n                          } catch (error) {}\r\n                        }}\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    </td>\r\n                  )}\r\n                </tr>\r\n              </tbody>\r\n            );\r\n          })}\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminManager;\r\n"],"sourceRoot":""}