(this["webpackJsonpmy-app-2"]=this["webpackJsonpmy-app-2"]||[]).push([[31],{129:function(e,t,a){"use strict";var n=a(30),r={},i=new(a(75).a)(r),c=r,o={subscribe:function(e){return i.subscribe((function(t){return e(t)}))},currentState:function(){var e;return i.subscribe((function(t){e=t})),e},updateData:function(e){c=Object(n.a)(Object(n.a)({},c),e),i.next(c)}};t.a=o},133:function(e,t,a){"use strict";a(141);var n=a(0),r=a.n(n);t.a=function(e){var t=e.label,a=e.input,n=e.type,i=e.error,c=void 0===i?null:i,o=e.defaultValue,u=void 0===o?"":o,s=e.onKeyUp;return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement("div",{className:"form-custom"},r.a.createElement("input",{onKeyUp:s,defaultValue:u,ref:a,type:n||"text",required:!0}),r.a.createElement("label",{className:"label-name"},t)),c&&r.a.createElement("div",{className:"error-message"},c))}},141:function(e,t,a){},157:function(e,t,a){"use strict";a.d(t,"a",(function(){return _})),a.d(t,"g",(function(){return N})),a.d(t,"e",(function(){return P})),a.d(t,"c",(function(){return C})),a.d(t,"i",(function(){return V})),a.d(t,"j",(function(){return M})),a.d(t,"k",(function(){return F})),a.d(t,"f",(function(){return U})),a.d(t,"b",(function(){return q})),a.d(t,"d",(function(){return T})),a.d(t,"h",(function(){return z})),a.d(t,"l",(function(){return B})),a.d(t,"m",(function(){return W}));var n=a(30),r=a(191),i=a.n(r),c=a(142),o=a(154),u=a(131),s=a(83),d=a(107),l=a(101),b=a(149),p=a(159),m=a(40),f=a(205),j=a(136),O=a(156),g=a(137),h=a(168),v=a(169),y=a(100),S=a(150),E=a(140),L=a(184),I=a(64),w=a(75),k={dataInformationAnime:{},dataVideoPromo:[],dataEpisodesAnime:{},dataLargePicture:"",dataLargePictureList:[],isAddMode:null,malId:null,triggerFetch:null,dataRelatedAnime:[],pageRelated:1,isLoadingCharacter:null,isLoadingInfoAnime:null,isLoadingVideoAnime:null,isLoadingLargePicture:null,isLoadingEpisode:null,isLoadingRelated:null},D=new w.a(k),A=k,x={initialState:k,subscribe:function(e){return D.subscribe(e)},updateIsLoading:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"isLoadingCharacter";A=Object(n.a)(Object(n.a)({},A),{},Object(I.a)({},t,e)),D.next(A)},resetState:function(){A=Object(n.a)(Object(n.a)({},A),k),D.next(A)},currentState:function(){var e;return D.subscribe((function(t){return e=t})),e||k},updateData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k;A=Object(n.a)(Object(n.a)({},A),e),D.next(A)}},R=a(129),_=x,N=function(e,t){return Object(c.a)(0).pipe(Object(b.a)((function(){_.updateIsLoading(!0,"isLoadingInfoAnime"),_.updateData({isAddMode:null})})),Object(p.a)(Object(o.a)((function(){return R.a.currentState()[e]&&R.a.currentState()[e].dataInfo}),Object(c.a)(0).pipe(Object(m.a)((function(){return R.a.currentState()[e].dataInfo}))),Object(c.a)(0).pipe(Object(f.a)(1500),Object(p.a)(Object(l.a)("https://api.jikan.moe/v4/".concat(t,"/").concat(e)).pipe(Object(j.a)("response","data"),Object(O.a)(1),Object(g.a)((function(e){return[404,500].includes(e.status)?Object(u.a)("404 error"):Object(s.a)(e)}))))))))},P=function(e,t){return Object(c.a)(0).pipe(Object(p.a)(Object(o.a)((function(){return R.a.currentState()[e]&&R.a.currentState()[e].themes}),Object(c.a)(0).pipe(Object(m.a)((function(){return R.a.currentState()[e].themes}))),Object(c.a)(0).pipe(Object(h.a)((function(){return"anime"===t})),Object(v.a)(Object(l.a)("https://api.jikan.moe/v4/".concat(t,"/").concat(e,"/themes")).pipe(Object(O.a)(6),Object(j.a)("response","data")))))))},C=function(e,t){return Object(c.a)(0).pipe(Object(p.a)(Object(o.a)((function(){return R.a.currentState()[e]&&R.a.currentState()[e].externals}),Object(c.a)(0).pipe(Object(m.a)((function(){return R.a.currentState()[e].externals}))),Object(c.a)(0).pipe(Object(f.a)(1500),Object(p.a)(Object(l.a)("https://api.jikan.moe/v4/".concat(t,"/").concat(e,"/external")).pipe(Object(O.a)(6),Object(j.a)("response","data")))))))},V=function(e,t){return Object(o.a)((function(){return R.a.currentState()[e]&&R.a.currentState()[e].dataVideoPromo}),Object(c.a)(0).pipe(Object(m.a)((function(){return R.a.currentState()[e].dataVideoPromo}))),Object(c.a)(0).pipe(Object(h.a)((function(){return"anime"===t})),Object(b.a)((function(){_.updateIsLoading(!0,"isLoadingVideoAnime")})),Object(f.a)(1500),Object(p.a)(Object(l.a)("https://api.jikan.moe/v4/anime/".concat(e,"/videos")).pipe(Object(O.a)(6),Object(j.a)("response","data")))))},M=function(e,t){return Object(c.a)(0).pipe(Object(h.a)((function(){return"anime"===t})),Object(b.a)((function(){_.updateIsLoading(!0,"isLoadingEpisode")})),Object(p.a)(Object(l.a)("/api/movies/".concat(e,"/episodes")).pipe(Object(j.a)("response"))),Object(y.a)((function(){return console.log("Don't have episodes"),Object(s.a)({error:"Don't have episodes"})})))};function F(e,t){return Object(c.a)(0).pipe(Object(b.a)((function(){document.body.style.backgroundImage="url(/background.jpg)",document.body.style.backgroundSize="cover",_.updateIsLoading(!0,"isLoadingLargePicture")})),Object(p.a)(Object(o.a)((function(){return R.a.currentState()[e]&&R.a.currentState()[e].dataLargePictureList}),Object(c.a)(0).pipe(Object(m.a)((function(){return R.a.currentState()[e].dataLargePictureList}))),Object(c.a)(0).pipe(Object(f.a)(1500),Object(p.a)(Object(l.a)("https://api.jikan.moe/v4/".concat(t,"/").concat(e,"/pictures")).pipe(Object(j.a)("response","data"),Object(O.a)(5),Object(m.a)((function(e){return{pictures:e.map((function(e){var t=e.jpg;return e.webp.large_image_url||t.large_image_url}))}}))))))))}var U=function(e,t){return Object(l.a)({url:"/api/movies/box/".concat(e),headers:{authorization:"Bearer ".concat(t)}}).pipe(Object(j.a)("response"),Object(y.a)((function(e){return Object(s.a)({error:e})})))};function q(e){return e=e.replace("_"," "),i()(e)}function T(e,t){return Object(c.a)(0).pipe(Object(b.a)((function(){_.updateIsLoading(!0,"isLoadingRelated")})),Object(f.a)(1500),Object(p.a)(Object(l.a)({url:"https://api.jikan.moe/v4/".concat(t,"/").concat(e,"/recommendations")}).pipe(Object(O.a)(6),Object(j.a)("response","data"),Object(y.a)((function(e){return Object(s.a)({error:e})})))))}function z(e,t){return Object(c.a)(0).pipe(Object(b.a)((function(){_.updateIsLoading(!0,"isLoadingCharacter")})),Object(p.a)(Object(o.a)((function(){return R.a.currentState()[e]&&R.a.currentState()[e].dataCharacter}),Object(c.a)(0).pipe(Object(m.a)((function(){return R.a.currentState()[e].dataCharacter}))),Object(c.a)(0).pipe(Object(p.a)(Object(l.a)("https://api.jikan.moe/v4/".concat(t,"/").concat(e,"/characters")).pipe(Object(O.a)(20),Object(j.a)("response","data"),Object(y.a)((function(e){return Object(s.a)({error:e})}))))))))}function B(e,t,a){return Object(c.a)(0).pipe(Object(S.a)(500),Object(E.a)((function(){return!0===a&&e.current})),Object(g.a)((function(){return Object(d.a)(e.current,"click").pipe(Object(E.a)((function(){return _.currentState().dataInformationAnime})),Object(L.a)((function(){return Object(l.a)({method:"POST",url:"/api/movies/box",headers:{authorization:"Bearer ".concat(t)},body:{malId:_.currentState().dataInformationAnime.mal_id,title:_.currentState().dataInformationAnime.title,imageUrl:_.currentState().dataLargePictureList[0],episodes:_.currentState().dataInformationAnime.episodes||"??",score:_.currentState().dataInformationAnime.score,airing:_.currentState().dataInformationAnime.airing,synopsis:_.currentState().dataInformationAnime.synopsis}}).pipe(Object(j.a)("response","message"),Object(m.a)((function(e){return Object(n.a)(Object(n.a)({},e),{},{typeResponse:"handle add box"})})),Object(y.a)((function(){_.updateData({triggerFetch:!_.currentState().triggerFetch})})))})))})))}function W(e,t,a,r){return Object(c.a)(0).pipe(Object(S.a)(500),Object(E.a)((function(){return!1===r&&e.current})),Object(g.a)((function(){return Object(d.a)(e.current,"click").pipe(Object(E.a)((function(){return _.currentState().dataInformationAnime})),Object(L.a)((function(){return Object(l.a)({method:"DELETE",url:"/api/movies/box/".concat(a),headers:{authorization:"Bearer ".concat(t)}}).pipe(Object(j.a)("response","message"),Object(m.a)((function(e){return Object(n.a)(Object(n.a)({},e),{},{typeResponse:"handle delete box"})})),Object(y.a)((function(){_.updateData({triggerFetch:!_.currentState().triggerFetch})})))})))})))}},158:function(e,t,a){"use strict";a.d(t,"c",(function(){return O})),a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return h}));var n=a(142),r=a(83),i=a(123),c=a(101),o=a(169),u=a(136),s=a(156),d=a(100),l=a(137),b=a(30),p=a(75),m={currentPageBoxMovie:1,currentPageUpdatedMovie:1,updatedMovie:[],boxMovie:[],lastPageUpdatedMovie:1,lastPageBoxMovie:1,subNavToggle:null,triggerFetch:!1},f=new p.a(m),j=m,O={initialState:m,subscribe:function(e){return f.subscribe((function(t){return e(t)}))},currentState:function(){var e;return f.subscribe((function(t){e=t})),e||m},init:function(){f.next(j)},updateData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;j=Object(b.a)(Object(b.a)({},j),e),f.next(j)},updateDataQuick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=Object.keys(e);t.forEach((function(t){j[t]=e[t]}))}},g=function(){return Object(n.a)(0).pipe(Object(o.a)(Object(c.a)({url:"/api/movies/latest?page="+O.currentState().currentPageUpdatedMovie}).pipe(Object(u.a)("response","message"),Object(s.a)(20),Object(d.a)((function(){return Object(r.a)([])})))))},h=function(e){return Object(n.a)(0).pipe(Object(l.a)((function(){return Object(c.a)({url:"/api/movies/box?page="+O.currentState().currentPageBoxMovie,headers:{authorization:"Bearer ".concat(e)}}).pipe(Object(u.a)("response","message"),Object(s.a)(20),Object(d.a)((function(e){return Object(i.a)([])})))})))}},181:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(30),r=new(0,a(52).BehaviorSubject),i={role:null,page:1,numberDisplay:12,dataCharacter:[],dataCharacterRaw:[]},c=i,o={initialState:i,updateData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;c=Object(n.a)(Object(n.a)({},c),e),r.next(c)},init:function(){r.next(c)},subscribe:function(e){return r.subscribe(e)},currentState:function(){var e;return r.subscribe((function(t){return e=t})),e||i},updateRole:function(e){c=Object(n.a)(Object(n.a)({},c),{},{role:e}),r.next(c)},updatePage:function(e){c=Object(n.a)(Object(n.a)({},c),{},{page:e}),r.next(c)}}},184:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(2),r=a(40),i=a(123),c=a(21);function o(e,t){return t?function(a){return a.pipe(o((function(a,n){return Object(i.a)(e(a,n)).pipe(Object(r.a)((function(e,r){return t(a,e,n,r)})))})))}:function(t){return t.lift(new u(e))}}var u=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project))},e}(),s=function(e){function t(t,a){var n=e.call(this,t)||this;return n.project=a,n.hasSubscription=!1,n.hasCompleted=!1,n.index=0,n}return n.a(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t,a=this.index++;try{t=this.project(e,a)}catch(n){return void this.destination.error(n)}this.hasSubscription=!0,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new c.a(this),a=this.destination;a.add(t);var n=Object(c.c)(e,t);n!==t&&a.add(n)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(c.b)},198:function(e,t,a){"use strict";a.d(t,"b",(function(){return I})),a.d(t,"a",(function(){return w})),a.d(t,"c",(function(){return k}));var n=a(142),r=a(154),i=a(83),c=a(107),o=a(101),u=a(140),s=a(149),d=a(169),l=a(40),b=a(136),p=a(156),m=a(166),f=a(100),j=a(159),O=a(150),g=a(168),h=a(129),v=a(30),y=a(75),S={reviewsData:[],pageReviewsData:1,pageReviewsOnDestroy:null,isStopFetchingReviews:null,shouldUpdatePageReviewData:!1,previousMalId:null,pageSplit:1},E=new y.a(S),L=S,I={initialState:S,subscribe:function(e){return E.subscribe((function(t){return e(t)}))},currentState:function(){var e;return E.subscribe((function(t){e=t})),e||S},init:function(){E.next(L)},updateData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;L=Object(v.a)(Object(v.a)({},L),e),E.next(L)},updateDataQuick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=Object.keys(e);t.forEach((function(t){L[t]=e[t]}))}};function w(e,t,a){return Object(n.a)(0).pipe(Object(u.a)((function(){return a})),Object(s.a)((function(){return I.updateData({isStopFetchingReviews:!1})})),Object(d.a)(Object(r.a)((function(){return h.a.currentState()[e]&&h.a.currentState()[e].dataReviews}),Object(n.a)(0).pipe(Object(l.a)((function(){return h.a.currentState()[e].dataReviews}))),Object(o.a)("https://api.jikan.moe/v4/".concat(a,"/").concat(e,"/reviews?page=").concat(t)).pipe(Object(b.a)("response","data"),Object(p.a)(3),Object(m.a)(5e3),Object(p.a)(0===I.currentState().reviewsData.length?null:3),Object(s.a)((function(){return I.updateData({pageReviewsOnDestroy:t})})),Object(f.a)((function(e){return Object(i.a)({error:e})}))))))}function k(){return Object(n.a)(0).pipe(Object(j.a)(Object(r.a)((function(){return window.innerWidth<770}),Object(c.a)(window,"scroll").pipe(Object(O.a)(500),Object(g.a)((function(){return!I.currentState().isStopFetchingReviews})),Object(u.a)((function(){return document.body.scrollHeight-(window.scrollY+1500)<0})),Object(s.a)((function(){I.currentState().pageSplit<=I.currentState().reviewsData.length&&I.updateData({pageSplit:I.currentState().pageSplit+1})}))),Object(c.a)(window,"scroll").pipe(Object(g.a)((function(){return!I.currentState().isStopFetchingReviews})),Object(u.a)((function(){return document.body.scrollHeight-(window.scrollY+1500)<0})),Object(s.a)((function(){I.currentState().pageSplit<=I.currentState().reviewsData.length&&I.updateData({pageSplit:I.currentState().pageSplit+1})}))))))}},223:function(e,t,a){},346:function(e,t,a){"use strict";a.r(t);var n=a(18),r=a.n(n),i=a(36),c=a(127),o=a(26),u=(a(223),a(7)),s=a(119),d=a(0),l=a.n(d),b=a(120),p=a(13),m=a(101),f=a(30),j=a(157),O=a(133);var g=function(e){var t=e.inputEpisodeRef,a=e.inputVideoUrlRef,n=e.cookies,c=e.malId,o=e.episodeData,u=e.typeVideoSelectRef;return l.a.createElement("div",{className:"form-submit"},l.a.createElement("select",{ref:u,defaultValue:"video"},l.a.createElement("option",{value:"video"},"video"),l.a.createElement("option",{value:"iframe"},"iframe")),l.a.createElement("select",{defaultValue:"vi",className:"select-language-anime",onChange:function(e){var t=e.target.value,a=document.querySelector(".select-mode-anime");a.style.display="eng"===t?"block":"none"}},l.a.createElement("option",{value:"eng"},"Eng"),l.a.createElement("option",{value:"vi"},"Vi")),l.a.createElement("select",{defaultValue:"sub",className:"select-mode-anime",style:{display:"none"}},l.a.createElement("option",{value:"sub"},"Sub"),l.a.createElement("option",{value:"dub"},"Dub")),l.a.createElement(O.a,{label:"Number",type:"number",input:t}),l.a.createElement(O.a,{label:"Video url",input:a}),l.a.createElement("button",{className:"btn btn-success",type:"submit",onClick:Object(i.a)(r.a.mark((function e(){var i,s,d,l,b,p,m,O,g;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=parseInt(t.current.value),s=a.current.value,d="video"===u.current.value,l=document.querySelector(".select-language-anime").value,b="dub"===document.querySelector(".select-mode-anime").value,p=n.idCartoonUser,!isNaN(i)&&s&&""!==s.trim()){e.next=9;break}return alert("Episode and Url are required"),e.abrupt("return");case 9:return e.prev=9,e.next=12,fetch("/api/movies/".concat(c,"/episode/").concat(i,"/").concat(l,"/").concat(b),{method:"PUT",body:JSON.stringify({embedUrl:s,typeVideo:d}),headers:{authorization:"Bearer ".concat(p),"Content-Type":"application/json"}});case 12:return m=e.sent,e.next=15,m.json();case 15:if(!(O=e.sent).error){e.next=18;break}throw Error("Some thing went wrong");case 18:g=o,"vi"===l&&j.a.updateData({dataEpisodesAnime:Object(f.a)(Object(f.a)({},g),{},{episodes:O})}),"eng"===l&&(b?j.a.updateData({dataEpisodesAnime:Object(f.a)(Object(f.a)({},g),{},{episodesEngDub:O})}):j.a.updateData({dataEpisodesAnime:Object(f.a)(Object(f.a)({},g),{},{episodesEng:O})})),t.current.value="",a.current.value="",e.next=28;break;case 25:e.prev=25,e.t0=e.catch(9),alert("Something went wrong");case 28:case"end":return e.stop()}}),e,null,[[9,25]])})))},"Submit"))},h=a(158);var v=function(e){var t=e.startEpisodeInputRef,a=e.endEpisodeInputRef,n=e.linkWatchingInputRef,c=e.buttonSubmitCrawlInputRef,u=e.selectCrawlInputRef,s=e.malId,b=e.cookies,p=e.selectModeEngVideoRef,m=Object(d.useState)(null),f=Object(o.a)(m,2),g=f[0],v=f[1];return Object(d.useEffect)((function(){c.current.disabled=!1}),[s]),l.a.createElement("div",{className:"form-submit"},l.a.createElement("select",{defaultValue:"gogostream",ref:u},l.a.createElement("option",{value:"gogostream"},"gogostream")),l.a.createElement("select",{defaultValue:"sub",ref:p},l.a.createElement("option",{value:"sub"},"Sub"),l.a.createElement("option",{value:"dub"},"Dub")),l.a.createElement("div",{className:"form-limit-episode"},l.a.createElement(O.a,{label:"start",type:"number",input:t,error:g}),l.a.createElement(O.a,{label:"end",type:"number",input:a})),l.a.createElement(O.a,{label:"Watch Url",input:n}),l.a.createElement("button",{className:"btn btn-success",ref:c,onClick:Object(i.a)(r.a.mark((function e(){var i,o,d,l,m,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.current.value,o=a.current.value,d=n.current.value,l=u.current.value,m=!!p.current&&"dub"===p.current.value,e.t0=l,e.next="gogostream"===e.t0?8:11;break;case 8:if(!(!d.includes("gogo-stream.com/videos/")||!/-dub-episode-[0-9]+/.test(d)&&!0===m||/-dub-episode-[0-9]+/.test(d)&&!1===m)){e.next=10;break}return e.abrupt("return",alert("Invalid url"));case 10:case 11:return e.abrupt("break",12);case 12:if(""!==t.current.value.trim()&&t.current.value&&""!==a.current.value.trim()&&a.current.value&&""!==n.current.value.trim()&&n.current.value){e.next=15;break}return alert("start, end and watch url are required"),e.abrupt("return");case 15:return e.prev=15,c.current.disabled=!0,e.next=19,fetch("/api/movies/".concat(s,"/episodes/crawl"),{method:"PUT",body:JSON.stringify({start:i,end:o,url:d,serverWeb:l,isDub:m}),headers:{authorization:"Bearer ".concat(b.idCartoonUser),"Content-Type":"application/json"}});case 19:return f=e.sent,e.next=22,f.json();case 22:if(!(f=e.sent).error){e.next=25;break}throw Error(f.error);case 25:t.current&&a.current&&c.current&&n.current&&(j.a.updateData({dataEpisodesAnime:f.message}),v(null),t.current.value="",a.current.value="",c.current.disabled=!1,n.current&&(n.current.value=f.message.source||"")),e.next=32;break;case 28:e.prev=28,e.t1=e.catch(15),e.t1&&v(e.t1),t.current&&a.current&&n.current&&(t.current.value="",a.current.value="",n.current&&(c.current.disabled=!1));case 32:h.c.updateData({triggerFetch:!h.c.currentState().triggerFetch});case 33:case"end":return e.stop()}}),e,null,[[15,28]])})))},"Submit"))};var y=function(e){var t=e.episodeData,a=e.malId,n=e.keyListEpisode;return l.a.createElement("div",{className:"list-video-url"},t&&t.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{episode:e.episode})})).slice(t.length-6,t.length).reverse().map((function(e,t){return l.a.createElement(p.b,{key:t,to:"/anime/".concat(a,"/watch/").concat(e.episode,"/").concat(""===n.replace("episodes","")?"vie":n.replace("episodes",""))},e.episode)})))};var S=function(e){var t=e.elementTitle,a=e.toggleNavTitle;return l.a.createElement("div",{className:"tag-scrolling-nav",style:{maxHeight:a?"2000px":"0",boxShadow:a?"0 0 4px 1px white":"none"}},t&&t.slice(1,t.length).map((function(e,t){return l.a.createElement("div",{key:t,className:"tag-scrolling-nav_item",onClick:function(){e.scrollIntoView({behavior:"smooth"})}},e.innerText)})))},E=a(22),L=a(64),I=a(123),w=a(83),k=a(149),D=a(40),A=a(100),x=a(153),R=a(137),_=a(181),N=a(198),P=a(129),C=function(e){Object(d.useEffect)(function(e){return function(){var t=j.a.subscribe(e);return function(){document.title="My Anime Fun - Watch latest anime in high quality",t.unsubscribe()}}}(e),[])},V=function(e,t,a,n){Object(d.useEffect)(function(e,t,a,n){return function(){var r,i=Object(j.g)(e,n),o=Object(j.i)(e,n).pipe(Object(k.a)((function(t){if(t&&!t.error){var a=t.promo;a&&(j.a.updateData({dataVideoPromo:a}),P.a.updateData(Object(f.a)(Object(f.a)({},P.a.currentState()),{},Object(L.a)({},e,Object(f.a)(Object(f.a)({},P.a.currentState()[e]),{},{dataVideoPromo:t}))))),j.a.updateIsLoading(!1,"isLoadingVideoAnime")}}))),u=Object(j.k)(e,n).pipe(Object(k.a)((function(t){var a,n=t.pictures;if(t.error)j.a.updateData({isLoadingLargePicture:!1});else try{P.a.updateData(Object(f.a)(Object(f.a)({},P.a.currentState()),{},Object(L.a)({},e,Object(f.a)(Object(f.a)({},P.a.currentState()[e]),{},{dataLargePictureList:{pictures:Object(c.a)(n)}})))),j.a.updateData({dataLargePictureList:n.reverse(),isLoadingLargePicture:!1}),j.a.currentState().dataLargePictureList[0]?document.body.style.backgroundImage="url(".concat(j.a.currentState().dataLargePictureList[0],")"):document.body.style.backgroundImage="url(/background.jpg)",document.body.style.backgroundSize="contain"}catch(a){document.body.style.backgroundImage="url(/background.jpg)",j.a.updateData({isLoadingLargePicture:!1}),console.log(a)}}))),s=Object(j.j)(e,n).pipe(Object(k.a)((function(e){e.error?(j.a.updateIsLoading(!1,"isLoadingEpisode"),j.a.updateData({dataEpisodesAnime:{}})):(j.a.updateIsLoading(!1,"isLoadingEpisode"),t&&(t.value=e.message.source),j.a.updateData({dataEpisodesAnime:e.message}))}))).subscribe(),d=Object(j.d)(e,n).pipe(Object(k.a)((function(t){if(j.a.updateIsLoading(!1,"isLoadingRelated"),t&&!t.error){var a=t.map((function(e){var t=e.entry,a=e.votes;return Object(f.a)(Object(f.a)({},t),{},{recommendation_count:a})}));j.a.updateData({dataRelatedAnime:a}),P.a.updateData(Object(f.a)(Object(f.a)({},P.a.currentState()),{},Object(L.a)({},e,Object(f.a)(Object(f.a)({},P.a.currentState()[e]),{},{dataRelatedAnime:t}))))}}))),l=Object(j.h)(e,n).pipe(Object(k.a)((function(t){j.a.updateIsLoading(!1,"isLoadingCharacter"),t&&!t.error&&(_.a.updateData({dataCharacter:t,dataCharacterRaw:t,page:1}),P.a.updateData(Object(L.a)({},e,Object(f.a)(Object(f.a)({},P.a.currentState()[e]),{},{dataCharacter:t}))))}))),b=Object(I.a)([i.pipe(Object(D.a)((function(e){return Object(f.a)(Object(f.a)({},e),{},{type_data:"data info"})})),Object(A.a)((function(){return Object(w.a)({error:"something went wrong"})}))),Object(j.e)(e,n).pipe(Object(D.a)((function(e){return Object(f.a)(Object(f.a)({},e),{},{type_data:"themes"})})),Object(A.a)((function(){return Object(w.a)({error:"something went wrong"})}))),Object(j.c)(e,n).pipe(Object(D.a)((function(e){return Object(f.a)(Object(f.a)({},e),{},{type_data:"externals"})})),Object(A.a)((function(){return Object(w.a)({error:"something went wrong"})})))]).pipe(Object(x.a)(),Object(k.a)((function(t){if(t&&!t.error){var n={};switch(t.type_data){case"data info":n={opening_themes:"",ending_themes:"",external_links:{},broadcast:t.broadcast&&t.broadcast.day?["Day: ".concat(t.broadcast.day),"Time: ".concat(t.broadcast.time),"Timezone: ".concat(t.broadcast.timezone),"String: ".concat(t.broadcast.string)]:null},P.a.updateData(Object(L.a)({},e,Object(f.a)(Object(f.a)({},P.a.currentState()[e]),{},{dataInfo:t}))),j.a.updateData({dataInformationAnime:Object(f.a)(Object(f.a)({},t),n)}),document.title=t.title||"My Anime Fun - Watch latest anime in high quality";break;case"themes":n={opening_themes:t.openings,ending_themes:t.endings},j.a.updateData({dataInformationAnime:Object(f.a)(Object(f.a)({},j.a.currentState().dataInformationAnime),n)}),P.a.updateData(Object(L.a)({},e,Object(f.a)(Object(f.a)({},P.a.currentState()[e]),{},{themes:t}))),t&&t.openings&&t.openings.length>3||t&&t.endings&&t.endings.length>3?a(!1):a(!0);break;case"externals":n={external_links:t},P.a.updateData(Object(L.a)({},e,Object(f.a)(Object(f.a)({},P.a.currentState()[e]),{},{externals:t}))),j.a.updateData({dataInformationAnime:Object(f.a)(Object(f.a)({},j.a.currentState().dataInformationAnime),n),isLoadingInfoAnime:!1})}}})));return j.a.currentState().malId!==e&&(window.scroll({top:0,behavior:"smooth"}),j.a.resetState(),r=Object(I.a)([u,b,l,d,o,Object(N.a)(e,N.b.currentState().pageReviewsData,n).pipe(Object(k.a)((function(t){if(t&&!t.error){var a;if(P.a.updateData({dataReviews:t}),a=0===N.b.currentState().reviewsData.length||N.b.currentState().previousMalId!==e?t:N.b.currentState().reviewsData.concat(t),0===t.length)return void N.b.updateData({isStopFetchingReviews:!0});N.b.updateData({reviewsData:a,previousMalId:e,pageReviewsOnDestroy:N.b.currentState().pageReviewsData,shouldUpdatePageReviewData:!0}),a.length>0&&j.a.updateData({malId:j.a.currentState().malId})}else N.b.updateData({isStopFetchingReviews:!0,shouldUpdatePageReviewData:!1})}))).pipe(Object(k.a)((function(){j.a.updateData({malId:e})})))]).pipe(Object(x.a)()).subscribe((function(){}))),function(){t&&(t.value=""),s.unsubscribe(),r&&r.unsubscribe(),a(!1)}}}(a,t.current,e,n),[a,t.current])},M=function(e,t,a,n,r,i){var c=e.idCartoonUser;Object(d.useEffect)(function(e,t,a,n,r){return function(){var i=Object(j.f)(e,t).pipe(Object(R.a)((function(i){return i.error?(j.a.updateData({isAddMode:!0}),Object(j.l)(a,t,r)):(j.a.updateData({isAddMode:!1}),Object(j.m)(n,t,e,r))}))).subscribe((function(e){switch(e.typeResponse){case"handle add box":j.a.updateData({isAddMode:!1});break;default:j.a.updateData({isAddMode:!0})}}));return function(){i&&i.unsubscribe()}}}(t,c,a,n,r),[c,t,r,i])},F=Object(u.a)((function(){return a.e(63).then(a.bind(null,333))})),U=Object(u.a)((function(){return a.e(41).then(a.bind(null,347))})),q=Object(u.a)((function(){return a.e(54).then(a.bind(null,334))})),T=Object(u.a)((function(){return a.e(60).then(a.bind(null,335))})),z=Object(u.a)((function(){return a.e(34).then(a.bind(null,336))})),B=Object(u.a)((function(){return a.e(56).then(a.bind(null,352))}));t.default=function(e){var t=e.match.params.name,a=e.match.path.split("/")[1],n=parseInt(t),u=E.b.currentState(),f=Object(b.a)(),O=Object(o.a)(f,1)[0],h=Object(d.useState)(j.a.currentState()),L=Object(o.a)(h,2),I=L[0],w=L[1],k=Object(d.useState)(!1),D=Object(o.a)(k,2),A=D[0],x=D[1],R=Object(d.useState)(!1),_=Object(o.a)(R,2),N=_[0],P=_[1],W=Object(d.useState)([]),K=Object(o.a)(W,2),J=K[0],H=K[1],Y=Object(d.useRef)(),Q=Object(d.useRef)(),G=Object(d.useRef)(),X=Object(d.useRef)(),Z=Object(d.useRef)(),$=Object(d.useRef)(),ee=Object(d.useRef)(),te=Object(d.useRef)(),ae=Object(d.useRef)(),ne=Object(d.useRef)(),re=Object(d.useRef)(),ie=Object(d.useRef)(),ce=Object(d.useState)(!1),oe=Object(o.a)(ce,2),ue=oe[0],se=oe[1];Object(d.useEffect)((function(){return I.dataLargePictureList[0]&&(document.body.style.backgroundImage="url(".concat(I.dataLargePictureList[0],")"),document.body.style.backgroundSize="contain"),function(){document.body.style.backgroundImage="url(/background.jpg)",document.body.style.backgroundSize="cover"}}),[]),C(w),V(x,te,n,a),M(O,n,G,Q,I.isAddMode,I.triggerFetch),Object(d.useEffect)((function(){var e=j.a.currentState().dataInformationAnime,t=e.opening_themes,a=e.ending_themes;a&&t&&a.length<=3&&t.length<=3&&x(!0)}),[n,A]);var de=document.querySelectorAll(".title")||[],le=Object(c.a)(de);Object(d.useEffect)((function(){H(le)}),[le.length,n,J.length]);var be=function(e,t){var a=Object.keys(e.dataInformationAnime).filter((function(t){return e.dataInformationAnime&&e.dataInformationAnime.opening_themes&&e.dataInformationAnime.ending_themes&&document.querySelector(".button-show-more-information")&&0===e.dataInformationAnime.opening_themes.length&&0===e.dataInformationAnime.ending_themes.length&&(document.querySelector(".button-show-more-information").style.display="none"),-1===["title","image_url","url","synopsis","trailer_url","request_hash","request_cached","request_cache_expiry","mal_id","background","external_links","opening_themes","ending_themes","type_data"].indexOf(t)}));t||(a=[].concat(Object(c.a)(a),["external_links"]));t&&(a=[].concat(Object(c.a)(a),["external_links","opening_themes","ending_themes"]));var n,r={key:"",episodeList:[]};Object.keys(e.dataEpisodesAnime).forEach((function(t){var a=e.dataEpisodesAnime[t];["episodes","episodesEng","episodesEngDub"].includes(t)&&a.length>=r.episodeList.length&&(r={key:t,episodeList:Object(c.a)(a)})})),e.dataEpisodesAnime&&e.dataEpisodesAnime.sourceFilmList&&(n=Object.keys(e.dataEpisodesAnime.sourceFilmList));return{episodeDataDisplay:r,arrKeys:a,sourceFilmList:n}}(I,A),pe=be.episodeDataDisplay,me=be.arrKeys,fe=be.sourceFilmList;return I.dataInformationAnime&&l.a.createElement("div",{className:"anime-name-info layout"},l.a.createElement("h1",{className:"title"},I.dataInformationAnime.title),null!==I.isLoadingLargePicture&&!0===I.isLoadingLargePicture&&l.a.createElement(s.a,{color:"secondary",size:"4rem"}),l.a.createElement("div",{className:"image"},I.dataLargePictureList.length>1&&l.a.createElement(U,{listImage:I.dataLargePictureList,isLoading:I.isLoadingLargePicture}),1===I.dataLargePictureList.length&&l.a.createElement("img",{src:I.dataLargePictureList[0],alt:"image_anime",style:{width:"100%"}}),I.dataLargePictureList.length<1&&I.dataInformationAnime.images&&l.a.createElement("img",{src:I.dataInformationAnime.images.jpg.large_image_url,alt:"image_anime",style:{width:"100%"}})),l.a.createElement(S,{elementTitle:J,toggleNavTitle:N}),l.a.createElement("div",{className:"menu-control"},pe&&pe.episodeList.length>0&&l.a.createElement(p.b,{to:"/anime/"+n+"/watch/".concat(pe.episodeList[0].episode,"/").concat(""===pe.key.replace("episodes","")?"vie":pe.key.replace("episodes",""))},l.a.createElement("button",{className:"btn btn-success"},"Watch")),u&&!I.isLoadingLargePicture&&l.a.createElement("span",{style:{display:"inline"}},!0===I.isAddMode&&l.a.createElement("button",{className:"btn btn-primary",ref:G},"Add to Box"),!1===I.isAddMode&&l.a.createElement("button",{ref:Q,className:"btn btn-danger"},"Delete from Box")),!I.isLoadingLargePicture&&l.a.createElement("button",{disabled:ue,className:"btn btn-request",onClick:function(){if("Not yet aired"===I.dataInformationAnime.status)return alert("This anime is not aired yet");if(I.dataInformationAnime.episodes===pe.episodeList.length)return alert("This anime has been updated");if(!u||"Currently Airing"!==I.dataInformationAnime.status&&"Finished Airing"!==I.dataInformationAnime.status||I.dataInformationAnime.episodes===pe.episodeList.length)alert("require Login");else{var e=I.dataInformationAnime;se(!0),Object(m.a)({url:"/api/movies/request",method:"POST",headers:{authorization:"Bearer ".concat(O.idCartoonUser)},body:{malId:n.toString(),title:e.title,imageUrl:e.images.webp.large_image_url||e.images.jpg.large_image_url||e.image_url,score:e.score,synopsis:e.synopsis}}).subscribe((function(e){e.error||(alert("Your request has been filed"),se(!1))}))}}},"Request"),l.a.createElement("button",{className:"btn btn-dark",onClick:function(){P(!N)}},"Shortcut")),l.a.createElement("div",{className:"box"},l.a.createElement("div",{className:"box-info"},l.a.createElement("h1",{style:{margin:"0"},className:"title"},"About"),l.a.createElement(F,{arrKeys:me,isLoading:I.isLoadingInfoAnime,type:a}),!A&&!1===I.isLoadingInfoAnime&&"anime"===a&&l.a.createElement("button",{className:"button-show-more-information",onClick:function(){x(!0)}},"Show More Information")),l.a.createElement("div",{className:"box-content"},l.a.createElement("h1",{style:{margin:"0"},className:"title"},"Synopsis"),l.a.createElement("div",{className:"content"},I.dataInformationAnime.synopsis||"(No synopsis added yet)"),I.dataInformationAnime.background&&l.a.createElement("div",null,l.a.createElement("h1",{style:{marginBottom:"0"},className:"title"},"Background"),l.a.createElement("div",{className:"content"},I.dataInformationAnime.background)),null!==I.isLoadingEpisode&&!0===I.isLoadingEpisode&&l.a.createElement("div",null,l.a.createElement(s.a,{color:"secondary",size:"4rem"})),!1===I.isLoadingEpisode&&"anime"===a&&pe&&pe.episodeList.length>0&&l.a.createElement("div",null,l.a.createElement("h1",{className:"title"},"Latest Episodes"),l.a.createElement(y,{episodeData:pe.episodeList,malId:n,keyListEpisode:pe.key})),u&&"Admin"===u.role&&l.a.createElement("div",{className:"admin-section"},l.a.createElement("h1",{className:"title"},"Adding episode url"),l.a.createElement(g,{inputEpisodeRef:Z,inputVideoUrlRef:X,cookies:O,malId:n,episodeData:I.dataEpisodesAnime,typeVideoSelectRef:ie}),l.a.createElement("h1",{className:"title"},"Crawl episode"),l.a.createElement("ul",null,fe&&fe.map((function(e,t){return l.a.createElement("li",{key:t},e,":"," ",I.dataEpisodesAnime.sourceFilmList[e])}))),l.a.createElement(v,{buttonSubmitCrawlInputRef:ae,endEpisodeInputRef:ee,startEpisodeInputRef:$,linkWatchingInputRef:te,selectCrawlInputRef:ne,malId:n,cookies:O,selectModeEngVideoRef:Y}),l.a.createElement("button",{className:"btn btn-danger",ref:re,onClick:Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re.current.disabled=!0,e.prev=1,e.next=4,fetch("/api/movies/".concat(n),{method:"DELETE",headers:{authorization:"Bearer ".concat(O.idCartoonUser)}});case 4:j.a.updateData({dataEpisodesAnime:{}}),re.current.disabled=!1,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),re.current.disabled=!1;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))},"Reset")))),l.a.createElement(q,{lazy:!0,isLoading:I.isLoadingCharacter}),l.a.createElement(z,{isLoading:I.isLoadingRelated,type:a}),I.dataVideoPromo&&l.a.createElement(T,{data:I.dataVideoPromo,isLoading:I.isLoadingVideoAnime}),l.a.createElement(B,{malId:n,type:a}))}}}]);
//# sourceMappingURL=31.854ebd24.chunk.js.map