{"version":3,"sources":["components/Characters/Characters.js"],"names":["CharacterItem","loadable","Characters","lazy","isLoading","history","useHistory","useState","characterStream","currentState","charactersState","setCharactersState","searchCharacterRef","useRef","useEffect","initSub","subscribe","init","unsubscribe","page","buttonSeemore","document","querySelector","numberDisplay","dataCharacter","length","style","display","subscription","timer","pipe","filter","current","switchMapTo","fromEvent","e","updateData","dataCharacterRaw","characterData","character","name","match","RegExp","target","value","className","width","maxWidth","margin","label","input","color","size","textAlign","slice","map","index","key","role","onClick","updatePage"],"mappings":"oQAYMA,EAAgBC,aAAS,kBAAM,wDA0GtBC,UAzGI,SAAC,GAAiC,IAAD,IAA9BC,YAA8B,SAAhBC,EAAgB,EAAhBA,UAC5BC,EAAUC,cAChB,EAA8CC,mBAC5CC,IAAgBC,gBADlB,mBAAOC,EAAP,KAAwBC,EAAxB,KAGMC,EAAqBC,mBAiD3B,OAhDAC,qBAAU,WACR,IAAMC,EAAUP,IAAgBQ,UAAUL,GAE1C,OADAH,IAAgBS,OACT,WACLF,EAAQG,iBAET,CAACR,EAAgBS,OAEpBL,qBAAU,WACR,IAAMM,EAAgBC,SAASC,cAAc,uBACzCF,IAEAZ,IAAgBC,eAAeU,KAC7BX,IAAgBC,eAAec,eACjCb,EAAgBc,cAAcC,OAE9BL,EAAcM,MAAMC,QAAU,OAE9BP,EAAcM,MAAMC,QAAU,WAGjC,CAACjB,EAAgBc,cAAcC,OAAQf,EAAgBS,OAE1DL,qBAAU,WACR,IAAMc,EAAeC,YAAM,GACxBC,KACCC,aAAO,kBAAMnB,EAAmBoB,WAChCC,YAAYC,YAAUtB,EAAmBoB,QAAS,WAEnDhB,WAAU,SAACmB,GACV3B,IAAgB4B,WAAW,CACzBZ,cAAehB,IACZC,eACA4B,iBAAiBN,QAChB,SAACO,GAAD,QACIA,EAAcC,UAAUC,KAAKC,MAC7B,IAAIC,OAAOP,EAAEQ,OAAOC,MAAO,cAKzC,OAAO,WACLpC,IAAgB4B,WAAW,CACzBZ,cAAehB,IAAgBC,eAAe4B,mBAEhDT,EAAaV,iBAEd,CAACd,IAEF,6BACE,wBAAIyC,UAAU,SAAd,eACe,IAAdzC,GACC,yBAAKsB,MAAO,CAAEoB,MAAO,OAAQC,SAAU,IAAKC,OAAQ,SAClD,kBAAC,IAAD,CAAOC,MAAO,mBAAoBC,MAAOtC,KAG9B,OAAdR,IAAoC,IAAdA,GACrB,kBAAC,IAAD,CAAkB+C,MAAM,YAAYC,KAAK,UAG5B,IAAdhD,GAAgE,IAAzCM,EAAgBc,cAAcC,QACpD,wBAAIC,MAAO,CAAC2B,UAAU,WAAtB,gCAGa,IAAdjD,GAAuBM,EAAgBc,cAAcC,OAAS,GAC7D,yBAAKoB,UAAU,kBACZnC,EAAgBc,cACd8B,MACC,EACA9C,IAAgBC,eAAeU,KAC7BX,IAAgBC,eAAec,eAElCgC,KAAI,SAACjB,EAAekB,GAAhB,OACH,kBAACxD,EAAD,CACEyD,IAAKD,EACLrD,KAAMA,EACNmC,cAAa,2BACRA,EAAcC,WADN,IAEXmB,KAAMpB,EAAcoB,OAEtBrD,QAASA,OAGf,yBACEwC,UAAU,qBACVnB,MAAO,CAAEC,QAAS,QAClBgC,QAAS,WACP,IAAMxC,EAAOX,IAAgBC,eAAeU,KAC5CX,IAAgBoD,WAAWzC,EAAO,KALtC","file":"static/js/54.5dab1855.chunk.js","sourcesContent":["import \"./Characters.css\";\r\n\r\nimport loadable from \"@loadable/component\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { fromEvent, timer } from \"rxjs\";\r\n\r\nimport { characterStream } from \"../../epics/character\";\r\nimport Input from \"../Input/Input\";\r\nimport { filter, switchMapTo } from \"rxjs/operators\";\r\n\r\nconst CharacterItem = loadable(() => import(\"../CharacterItem/CharacterItem\"));\r\nconst Characters = ({ lazy = false, isLoading }) => {\r\n  const history = useHistory();\r\n  const [charactersState, setCharactersState] = useState(\r\n    characterStream.currentState()\r\n  );\r\n  const searchCharacterRef = useRef();\r\n  useEffect(() => {\r\n    const initSub = characterStream.subscribe(setCharactersState);\r\n    characterStream.init();\r\n    return () => {\r\n      initSub.unsubscribe();\r\n    };\r\n  }, [charactersState.page]);\r\n  // console.log(dataCharacterState);\r\n  useEffect(() => {\r\n    const buttonSeemore = document.querySelector(\".see-more-character\");\r\n    if (buttonSeemore) {\r\n      if (\r\n        characterStream.currentState().page *\r\n          characterStream.currentState().numberDisplay >=\r\n        charactersState.dataCharacter.length\r\n      )\r\n        buttonSeemore.style.display = \"none\";\r\n      else {\r\n        buttonSeemore.style.display = \"block\";\r\n      }\r\n    }\r\n  }, [charactersState.dataCharacter.length, charactersState.page]);\r\n\r\n  useEffect(() => {\r\n    const subscription = timer(0)\r\n      .pipe(\r\n        filter(() => searchCharacterRef.current),\r\n        switchMapTo(fromEvent(searchCharacterRef.current, \"input\"))\r\n      )\r\n      .subscribe((e) => {\r\n        characterStream.updateData({\r\n          dataCharacter: characterStream\r\n            .currentState()\r\n            .dataCharacterRaw.filter(\r\n              (characterData) =>\r\n                !!characterData.character.name.match(\r\n                  new RegExp(e.target.value, \"i\")\r\n                )\r\n            ),\r\n        });\r\n      });\r\n    return () => {\r\n      characterStream.updateData({\r\n        dataCharacter: characterStream.currentState().dataCharacterRaw,\r\n      });\r\n      subscription.unsubscribe();\r\n    };\r\n  }, [isLoading]);\r\n  return (\r\n    <div>\r\n      <h1 className=\"title\">Characters</h1>\r\n      {isLoading === false && (\r\n        <div style={{ width: \"100%\", maxWidth: 800, margin: \"auto\" }}>\r\n          <Input label={\"Search Character\"} input={searchCharacterRef} />\r\n        </div>\r\n      )}\r\n      {isLoading !== null && isLoading === true && (\r\n        <CircularProgress color=\"secondary\" size=\"4rem\" />\r\n      )}\r\n\r\n      {isLoading === false && charactersState.dataCharacter.length === 0 && (\r\n        <h3 style={{textAlign:\"center\"}}>No Character has been found</h3>\r\n      )}\r\n\r\n      {isLoading === false && charactersState.dataCharacter.length > 0 && (\r\n        <div className=\"character-list\">\r\n          {charactersState.dataCharacter\r\n            .slice(\r\n              0,\r\n              characterStream.currentState().page *\r\n                characterStream.currentState().numberDisplay\r\n            )\r\n            .map((characterData, index) => (\r\n              <CharacterItem\r\n                key={index}\r\n                lazy={lazy}\r\n                characterData={{\r\n                  ...characterData.character,\r\n                  role: characterData.role,\r\n                }}\r\n                history={history}\r\n              />\r\n            ))}\r\n          <div\r\n            className=\"see-more-character\"\r\n            style={{ display: \"none\" }}\r\n            onClick={() => {\r\n              const page = characterStream.currentState().page;\r\n              characterStream.updatePage(page + 1);\r\n            }}\r\n          >\r\n            See more\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Characters;\r\n"],"sourceRoot":""}