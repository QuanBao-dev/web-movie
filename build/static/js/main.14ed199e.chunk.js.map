{"version":3,"sources":["epics/user.js","store/navbar.js","store/user.js","components/NavBar/NavBar.js","App.js","serviceWorker.js","index.js"],"names":["userStream","userStore","fetchingUser$","idCartoonUser","ajax","headers","authorization","method","url","pipe","throttleTime","asyncScheduler","leading","trailing","catchError","error","updateUser","initialState","of","behaviorSubject","BehaviorSubject","isShowBlockPopUp","isMobile","check","a","test","substr","navigator","userAgent","vendor","window","opera","mobileAndTabletCheck","state","navBarStore","init","next","subscribe","setState","v","currentState","ans","updateIsShowBlockPopUp","bool","undefined","current","user","updateAvatarUser","image","avatarImage","resetUser","logoutUser","removeCookie","cookie","fetch","path","convertImgToBase64","files","Promise","res","rej","reader","FileReader","onload","fileContent","onerror","readAsDataURL","withRouter","userState","cookies","useState","isShowToggleNav","setIsShowToggleNav","setIsMobile","navLoginRef","useRef","navRegisterRef","buttonScrollTopRef","history","useHistory","navBarAppRef","childNavBarAppRef","posY1","posY2","useEffect","document","body","offsetWidth","subscription","fromEvent","subscription2","scrollY","style","transform","backgroundColor","display","unsubscribe","className","ref","onClick","scroll","top","behavior","onMouseMove","onMouseLeave","justifyContent","paddingTop","to","src","width","height","alt","activeClassName","exact","role","cursor","alert","color","padding","push","username","querySelector","click","type","onChange","e","includes","target","file","JSON","stringify","result","json","resJson","Error","message","console","RequestedAnime","loadable","fallback","position","zIndex","LinearProgress","StorageAnime","Login","Register","StorageVertical","FAQ","EditUser","AdminManager","NotFound","Home","AnimeDetail","CharacterDetail","Theater","EpisodePage","SearchedList","PersonDetail","App","setUserState","useCookies","toggleNavBarState","setToggleNavBarState","subscriptionLock","getElementsByTagName","item","fetchingUserSub","response","CircularProgress","size","component","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","onUpdate","onSuccess","catch","ReactDOM","render","StrictMode","getElementById","URL","process","href","origin","addEventListener","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.14ed199e.chunk.js","sourcesContent":["import { asyncScheduler, of } from 'rxjs';\r\nimport { ajax } from 'rxjs/ajax';\r\nimport { catchError, throttleTime } from 'rxjs/operators';\r\n\r\nimport userStore from '../store/user';\r\n\r\nexport const userStream = userStore;\r\n\r\nexport const fetchingUser$ = (idCartoonUser) => {\r\n  return ajax({\r\n    headers: {\r\n      authorization: `Bearer ${idCartoonUser || \"\"}`,\r\n    },\r\n    method: \"GET\",\r\n    url: \"/api\",\r\n  }).pipe(\r\n    throttleTime(1000,asyncScheduler,{\r\n      leading:true,\r\n      trailing:true\r\n    }),\r\n    catchError((error) => {\r\n      userStream.updateUser(userStream.initialState);\r\n      return of({error})\r\n    })\r\n  );\r\n}","/* eslint-disable no-useless-escape */\r\nimport { BehaviorSubject } from \"rxjs\";\r\nconst behaviorSubject = new BehaviorSubject();\r\nconst initialState = {\r\n  isShowBlockPopUp: false,\r\n  isMobile: mobileAndTabletCheck(),\r\n};\r\n\r\nlet state = initialState;\r\n\r\nconst navBarStore = {\r\n  initialState,\r\n  init: () => {\r\n    behaviorSubject.next(state);\r\n  },\r\n  subscribe: (setState) => behaviorSubject.subscribe((v) => setState(v)),\r\n  currentState: () => {\r\n    let ans;\r\n    behaviorSubject.subscribe((v) => {\r\n      ans = v;\r\n    });\r\n    return ans || initialState;\r\n  },\r\n  updateIsShowBlockPopUp: (bool) => {\r\n    state = {\r\n      ...state,\r\n      isShowBlockPopUp: bool,\r\n    };\r\n    behaviorSubject.next(state);\r\n  },\r\n};\r\n\r\nexport default navBarStore;\r\n\r\nfunction mobileAndTabletCheck() {\r\n  let check = false;\r\n  (function (a) {\r\n    if (\r\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\r\n        a\r\n      ) ||\r\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\r\n        a.substr(0, 4)\r\n      )\r\n    )\r\n      check = true;\r\n  })(navigator.userAgent || navigator.vendor || window.opera);\r\n  return check;\r\n}\r\n","import { BehaviorSubject } from \"rxjs\";\r\nconst behaviorSubject = new BehaviorSubject();\r\nconst initialState = undefined;\r\nlet state = initialState;\r\n\r\nconst userStore = {\r\n  initialState,\r\n  currentState: () => {\r\n    let current;\r\n    behaviorSubject.subscribe((v) => (current = v));\r\n    return current || initialState;\r\n  },\r\n  subscribe: (setState) => behaviorSubject.subscribe((v) => setState(v)),\r\n  init: () => behaviorSubject.next(state),\r\n  updateUser: (user) => {\r\n    state = user;\r\n    behaviorSubject.next(state);\r\n  },\r\n  updateAvatarUser: (image) => {\r\n    state = {\r\n      ...state,\r\n      avatarImage: image,\r\n    };\r\n    behaviorSubject.next(state);\r\n  },\r\n  resetUser: () => {\r\n    state = undefined;\r\n    behaviorSubject.next(state);\r\n  },\r\n};\r\n\r\nexport default userStore;\r\n","import \"./NavBar.css\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useRef } from \"react\";\r\nimport { NavLink as Link, useHistory, withRouter } from \"react-router-dom\";\r\n\r\nimport { userStream } from \"../../epics/user\";\r\nimport { fromEvent } from \"rxjs\";\r\n\r\nconst NavBar = ({ userState, removeCookie, cookies }) => {\r\n  const [isShowToggleNav, setIsShowToggleNav] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const navLoginRef = useRef();\r\n  const navRegisterRef = useRef();\r\n  const buttonScrollTopRef = useRef();\r\n  const history = useHistory();\r\n  const navBarAppRef = useRef();\r\n  const childNavBarAppRef = useRef();\r\n  const posY1 = useRef(0);\r\n  const posY2 = useRef(0);\r\n  useEffect(() => {\r\n    if (document.body.offsetWidth > 1186) {\r\n      setIsMobile(false);\r\n    } else {\r\n      setIsMobile(true);\r\n    }\r\n    const subscription = fromEvent(window, \"resize\").subscribe(() => {\r\n      if (document.body.offsetWidth > 1186) {\r\n        setIsMobile(false);\r\n      } else {\r\n        setIsMobile(true);\r\n      }\r\n    });\r\n    const subscription2 = fromEvent(window, \"scroll\").subscribe(() => {\r\n      posY2.current = posY1.current - window.scrollY;\r\n      if (window.scrollY < 50) {\r\n        navBarAppRef.current.style.transform = \"translateY(0)\";\r\n        navBarAppRef.current.style.backgroundColor = \"rgba(2, 2, 2)\";\r\n        buttonScrollTopRef.current.style.transform = \"translateY(500px)\";\r\n      }\r\n      if (posY1.current) {\r\n        if (posY2.current < -1 && window.scrollY >= 50) {\r\n          navBarAppRef.current.style.transform = \"translateY(-500px)\";\r\n          if (\r\n            childNavBarAppRef.current.style.display !== \"flex\" &&\r\n            document.body.offsetWidth <= 1186\r\n          )\r\n            navBarAppRef.current.style.backgroundColor = \"rgba(2, 2, 2, 0.3)\";\r\n          if (\r\n            childNavBarAppRef.current.style.display === \"flex\" &&\r\n            document.body.offsetWidth <= 1186\r\n          )\r\n            childNavBarAppRef.current.style.display = \"none\";\r\n          if (document.body.offsetWidth > 1186) {\r\n            navBarAppRef.current.style.backgroundColor = \"rgba(2, 2, 2, 0.3)\";\r\n          }\r\n          buttonScrollTopRef.current.style.transform = \"translateY(500px)\";\r\n        }\r\n\r\n        if (posY2.current > 1 && window.scrollY >= 50) {\r\n          navBarAppRef.current.style.transform = \"translateY(0)\";\r\n          buttonScrollTopRef.current.style.transform = \"translateY(0)\";\r\n          if (childNavBarAppRef.current.style.display !== \"flex\") {\r\n            navBarAppRef.current.style.backgroundColor = \"rgba(2, 2, 2, 0.3)\";\r\n          }\r\n        }\r\n      }\r\n      posY1.current = window.scrollY;\r\n    });\r\n    return () => {\r\n      subscription.unsubscribe();\r\n      subscription2.unsubscribe();\r\n    };\r\n  }, []);\r\n  return (\r\n    <nav className=\"nav-bar\">\r\n      <div\r\n        ref={buttonScrollTopRef}\r\n        className=\"button-scroll-top\"\r\n        onClick={() => {\r\n          window.scroll({\r\n            top: 0,\r\n            behavior: \"smooth\",\r\n          });\r\n        }}\r\n      >\r\n        <i className=\"fas fa-arrow-up fa-2x\"></i>\r\n      </div>\r\n      <ul\r\n        className=\"nav-bar__app\"\r\n        ref={navBarAppRef}\r\n        onMouseMove={() => {\r\n          navBarAppRef.current.style.backgroundColor = \"black\";\r\n        }}\r\n        onMouseLeave={() => {\r\n          if (window.scrollY >= 50)\r\n            navBarAppRef.current.style.backgroundColor = \"rgb(2,2,2,0.2)\";\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            paddingTop: \"0.3rem\",\r\n          }}\r\n        >\r\n          <div\r\n            className=\"logo\"\r\n            onClick={() => {\r\n              setIsShowToggleNav(false);\r\n            }}\r\n          >\r\n            <Link to=\"/\">\r\n              <div className=\"logo-wrapper\">\r\n                <img\r\n                  src=\"https://myanimefun.herokuapp.com/logo192.png\"\r\n                  width={50}\r\n                  height={50}\r\n                  alt=\"\"\r\n                ></img>\r\n                <span>MyAnimeFun</span>\r\n              </div>\r\n            </Link>\r\n          </div>\r\n          <div\r\n            className=\"toggle-show__nav\"\r\n            style={{\r\n              backgroundColor: \"transparent\",\r\n            }}\r\n            onClick={() => {\r\n              setIsShowToggleNav(!isShowToggleNav);\r\n            }}\r\n          >\r\n            <i className=\"fas fa-bars fa-2x\"></i>\r\n          </div>\r\n        </div>\r\n        <ul\r\n          ref={childNavBarAppRef}\r\n          className=\"child-nav-bar__app\"\r\n          style={{\r\n            display: !isMobile || isShowToggleNav ? \"flex\" : \"none\",\r\n          }}\r\n        >\r\n          <li\r\n            className=\"left-nav-item nav-bar__item\"\r\n            onClick={() => {\r\n              setIsShowToggleNav(false);\r\n            }}\r\n          >\r\n            <Link to=\"/\" activeClassName=\"active\" exact>\r\n              Home\r\n            </Link>\r\n          </li>\r\n\r\n          <li\r\n            className=\"nav-bar__item\"\r\n            onClick={() => {\r\n              setIsShowToggleNav(false);\r\n            }}\r\n          >\r\n            <Link to=\"/storage\" activeClassName=\"active\" exact>\r\n              Storage\r\n            </Link>\r\n          </li>\r\n\r\n          {userState && userState.role === \"Admin\" && (\r\n            <li\r\n              className=\"nav-bar__item\"\r\n              onClick={() => {\r\n                setIsShowToggleNav(false);\r\n              }}\r\n            >\r\n              <Link to=\"/requests\" activeClassName=\"active\">\r\n                Request\r\n              </Link>\r\n            </li>\r\n          )}\r\n\r\n          {userState && userState.role === \"Admin\" && (\r\n            <li className=\"nav-bar__item\">\r\n              <Link to=\"/admin\" activeClassName=\"active\">\r\n                Admin\r\n              </Link>\r\n            </li>\r\n          )}\r\n\r\n          <li\r\n            className=\"nav-bar__item\"\r\n            onClick={() => {\r\n              setIsShowToggleNav(false);\r\n            }}\r\n          >\r\n            {userState && (\r\n              <Link to=\"/theater\" activeClassName=\"active\">\r\n                Theater\r\n              </Link>\r\n            )}\r\n            {!userState && (\r\n              <span\r\n                style={{ cursor: \"pointer\" }}\r\n                onClick={() => {\r\n                  alert(\"Require Login\");\r\n                }}\r\n              >\r\n                Theater\r\n              </span>\r\n            )}\r\n          </li>\r\n          <li\r\n            style={{ color: \"white\", cursor: \"pointer\" }}\r\n            className=\"nav-bar__item\"\r\n            onClick={() => {\r\n              setIsShowToggleNav(false);\r\n            }}\r\n          >\r\n            <Link to=\"/faq\" activeClassName=\"active\">\r\n              FAQ\r\n            </Link>\r\n          </li>\r\n          <li\r\n            className=\"nav-bar__item\"\r\n            ref={navLoginRef}\r\n            onClick={() => {\r\n              setIsShowToggleNav(false);\r\n            }}\r\n          >\r\n            {!userState && (\r\n              <Link to=\"/auth/login\" activeClassName=\"active\">\r\n                Login\r\n              </Link>\r\n            )}\r\n            {userState && (\r\n              <div\r\n                style={{\r\n                  color: \"white\",\r\n                  cursor: \"pointer\",\r\n                  display: \"inline\",\r\n                  padding: \"10px\",\r\n                }}\r\n                onClick={async () => {\r\n                  await logoutUser(removeCookie, cookies.idCartoonUser);\r\n                  history.push(\"/auth/login\");\r\n                }}\r\n              >\r\n                Logout\r\n              </div>\r\n            )}\r\n          </li>\r\n\r\n          {!userState && (\r\n            <li\r\n              ref={navRegisterRef}\r\n              className=\"nav-bar__item\"\r\n              onClick={() => {\r\n                setIsShowToggleNav(false);\r\n              }}\r\n            >\r\n              <Link to=\"/auth/register\" activeClassName=\"active\">\r\n                Register\r\n              </Link>\r\n            </li>\r\n          )}\r\n          {userState && (\r\n            <li\r\n              style={{ color: \"white\", cursor: \"pointer\" }}\r\n              className=\"nav-bar__item\"\r\n              onClick={() => {\r\n                setIsShowToggleNav(false);\r\n              }}\r\n            >\r\n              <Link to={`/edit`}>{userState.username}</Link>\r\n            </li>\r\n          )}\r\n          {userState && (\r\n            <li\r\n              className=\"nav-bar__item\"\r\n              onClick={() => {\r\n                setIsShowToggleNav(false);\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  color: \"white\",\r\n                  cursor: \"pointer\",\r\n                  display: \"inline\",\r\n                }}\r\n              >\r\n                <img\r\n                  className=\"avatar-user\"\r\n                  src={\r\n                    !userState.avatarImage\r\n                      ? \"https://iupac.org/wp-content/uploads/2018/05/default-avatar.png\"\r\n                      : userState.avatarImage\r\n                  }\r\n                  alt=\"avatar_user\"\r\n                  onClick={() => {\r\n                    document.querySelector(\".input-choose-avatar\").click();\r\n                  }}\r\n                />\r\n                <input\r\n                  className=\"input-choose-avatar\"\r\n                  type=\"file\"\r\n                  onChange={async (e) => {\r\n                    try {\r\n                      if (\r\n                        ![\"image/png\", \"image/jpeg\", \"image/gif\"].includes(\r\n                          e.target.files[0].type\r\n                        )\r\n                      ) {\r\n                        return alert(\"You just can upload image\");\r\n                      }\r\n                      const file = await convertImgToBase64(e.target.files[0]);\r\n                      const res = await fetch(\"/api/users/current/avatar\", {\r\n                        method: \"PUT\",\r\n                        body: JSON.stringify({\r\n                          avatarImage: file.target.result,\r\n                        }),\r\n\r\n                        headers: {\r\n                          authorization: `Bearer ${cookies.idCartoonUser}`,\r\n                          \"Content-Type\": \"application/json\",\r\n                        },\r\n                      });\r\n                      const resJson = await res.json();\r\n                      if (resJson.error) throw Error(resJson.error);\r\n                      userStream.updateAvatarUser(resJson.message);\r\n                    } catch (error) {\r\n                      console.error(error.message);\r\n                    }\r\n                  }}\r\n                />\r\n              </div>\r\n            </li>\r\n          )}\r\n        </ul>\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n\r\nasync function logoutUser(removeCookie, cookie) {\r\n  try {\r\n    await fetch(\"/api/users/logout\", {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: `Bearer ${cookie}`,\r\n      },\r\n    });\r\n    removeCookie(\"idCartoonUser\", {\r\n      path: \"/\",\r\n    });\r\n    userStream.updateUser(undefined);\r\n    // window.location.replace(\"/\");\r\n  } catch (error) {}\r\n}\r\n\r\nasync function convertImgToBase64(files) {\r\n  return new Promise((res, rej) => {\r\n    const reader = new FileReader();\r\n    reader.onload = (fileContent) => {\r\n      res(fileContent);\r\n    };\r\n\r\n    reader.onerror = (error) => {\r\n      rej(error);\r\n    };\r\n    reader.readAsDataURL(files);\r\n  });\r\n}\r\n\r\nexport default withRouter(NavBar);\r\n","import \"./App.css\";\r\n\r\nimport loadable from \"@loadable/component\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route,\r\n  Switch,\r\n  useHistory,\r\n} from \"react-router-dom\";\r\n\r\nimport NavBar from \"./components/NavBar/NavBar\";\r\nimport { fetchingUser$, userStream } from \"./epics/user\";\r\nimport navBarStore from \"./store/navbar\";\r\n\r\nconst RequestedAnime = loadable(\r\n  () => import(\"./pages/RequestedAnime/RequestedAnime\"),\r\n  {\r\n    fallback: (\r\n      <section style={{ position: \"fixed\", width: \"100%\", zIndex: \"2000\" }}>\r\n        <LinearProgress color=\"secondary\" />\r\n      </section>\r\n    ),\r\n  }\r\n);\r\nconst StorageAnime = loadable(\r\n  () => import(\"./pages/StorageAnime/StorageAnime\"),\r\n  {\r\n    fallback: (\r\n      <section style={{ position: \"fixed\", width: \"100%\", zIndex: \"2000\" }}>\r\n        <LinearProgress color=\"secondary\" />\r\n      </section>\r\n    ),\r\n  }\r\n);\r\nconst Login = loadable(() => import(\"./pages/Login/Login\"), {\r\n  fallback: (\r\n    <section style={{ position: \"fixed\", width: \"100%\", zIndex: \"2000\" }}>\r\n      <LinearProgress color=\"secondary\" />\r\n    </section>\r\n  ),\r\n});\r\nconst Register = loadable(() => import(\"./pages/Register/Register\"), {\r\n  fallback: (\r\n    <section style={{ position: \"fixed\", width: \"100%\", zIndex: \"2000\" }}>\r\n      <LinearProgress color=\"secondary\" />\r\n    </section>\r\n  ),\r\n});\r\n\r\nconst StorageVertical = loadable(\r\n  () => import(\"./pages/StorageVertical/StorageVertical\"),\r\n  {\r\n    fallback: (\r\n      <section style={{ position: \"fixed\", width: \"100%\", zIndex: \"2000\" }}>\r\n        <LinearProgress color=\"secondary\" />\r\n      </section>\r\n    ),\r\n  }\r\n);\r\nconst FAQ = loadable(() => import(\"./pages/FAQ/FAQ\"), {\r\n  fallback: (\r\n    <section style={{ position: \"fixed\", width: \"100%\", zIndex: \"2000\" }}>\r\n      <LinearProgress color=\"secondary\" />\r\n    </section>\r\n  ),\r\n});\r\nconst EditUser = loadable(() => import(\"./pages/EditUser/EditUser\"), {\r\n  fallback: (\r\n    <section style={{ position: \"fixed\", width: \"100%\", zIndex: \"2000\" }}>\r\n      <LinearProgress color=\"secondary\" />\r\n    </section>\r\n  ),\r\n});\r\nconst AdminManager = loadable(\r\n  () => import(\"./pages/AdminManager/AdminManager\"),\r\n  {\r\n    fallback: (\r\n      <section style={{ position: \"fixed\", width: \"100%\", zIndex: \"2000\" }}>\r\n        <LinearProgress color=\"secondary\" />\r\n      </section>\r\n    ),\r\n  }\r\n);\r\nconst NotFound = loadable(() => import(\"./pages/404/NotFound\"), {\r\n  fallback: (\r\n    <section style={{ position: \"fixed\", width: \"100%\", zIndex: \"2000\" }}>\r\n      <LinearProgress color=\"secondary\" />\r\n    </section>\r\n  ),\r\n});\r\nconst Home = loadable(() => import(\"./pages/Home/Home\"), {\r\n  fallback: (\r\n    <section style={{ position: \"fixed\", width: \"100%\", zIndex: \"2000\" }}>\r\n      <LinearProgress color=\"secondary\" />\r\n    </section>\r\n  ),\r\n});\r\nconst AnimeDetail = loadable(() => import(\"./pages/AnimeDetail/AnimeDetail\"), {\r\n  fallback: (\r\n    <section style={{ position: \"fixed\", width: \"100%\", zIndex: \"2000\" }}>\r\n      <LinearProgress color=\"secondary\" />\r\n    </section>\r\n  ),\r\n});\r\nconst CharacterDetail = loadable(\r\n  () => import(\"./pages/CharacterDetail/CharacterDetail\"),\r\n  {\r\n    fallback: (\r\n      <section style={{ position: \"fixed\", width: \"100%\", zIndex: \"2000\" }}>\r\n        <LinearProgress color=\"secondary\" />\r\n      </section>\r\n    ),\r\n  }\r\n);\r\nconst Theater = loadable(() => import(\"./pages/Theater/Theater\"), {\r\n  fallback: (\r\n    <section style={{ position: \"fixed\", width: \"100%\", zIndex: \"2000\" }}>\r\n      <LinearProgress color=\"secondary\" />\r\n    </section>\r\n  ),\r\n});\r\nconst EpisodePage = loadable(() => import(\"./pages/EpisodePage/EpisodePage\"), {\r\n  fallback: (\r\n    <section style={{ position: \"fixed\", width: \"100%\", zIndex: \"2000\" }}>\r\n      <LinearProgress color=\"secondary\" />\r\n    </section>\r\n  ),\r\n});\r\nconst SearchedList = loadable(() => import(\"./pages/Search/SearchedList\"), {\r\n  fallback: (\r\n    <section style={{ position: \"fixed\", width: \"100%\", zIndex: \"2000\" }}>\r\n      <LinearProgress color=\"secondary\" />\r\n    </section>\r\n  ),\r\n});\r\nconst PersonDetail = loadable(\r\n  () => import(\"./pages/PersonDetail/PersonDetail\"),\r\n  {\r\n    fallback: (\r\n      <section style={{ position: \"fixed\", width: \"100%\", zIndex: \"2000\" }}>\r\n        <LinearProgress color=\"secondary\" />\r\n      </section>\r\n    ),\r\n  }\r\n);\r\n\r\nfunction App() {\r\n  const [userState, setUserState] = useState(userStream.currentState());\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [cookies, , removeCookie] = useCookies([\"idCartoonUser\"]);\r\n  const [toggleNavBarState, setToggleNavBarState] = useState(\r\n    navBarStore.initialState\r\n  );\r\n  const history = useHistory();\r\n  useEffect(() => {\r\n    const subscription = userStream.subscribe(setUserState);\r\n    const subscriptionLock = navBarStore.subscribe(setToggleNavBarState);\r\n    fetch(\"https://web-rtc-myanimefun.herokuapp.com\");\r\n    return () => {\r\n      subscription.unsubscribe();\r\n      subscriptionLock.unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    navBarStore.init();\r\n    if (toggleNavBarState.isShowBlockPopUp) {\r\n      document.getElementsByTagName(\"body\").item(0).className = \"hidden-scroll\";\r\n    } else {\r\n      document.getElementsByTagName(\"body\").item(0).className = \"\";\r\n    }\r\n  }, [toggleNavBarState.isShowBlockPopUp]);\r\n  useEffect(() => {\r\n    const fetchingUserSub = fetchingUser$(cookies.idCartoonUser).subscribe(\r\n      (v) => {\r\n        if (!v.error) {\r\n          userStream.updateUser(v.response.message);\r\n        }\r\n      }\r\n    );\r\n    return () => {\r\n      fetchingUserSub.unsubscribe();\r\n    };\r\n  }, [cookies.idCartoonUser]);\r\n  return (\r\n    <Router history={history}>\r\n      {toggleNavBarState.isShowBlockPopUp && (\r\n        <div className=\"block-pop-up\">\r\n          <div className=\"loading-block\">\r\n            <CircularProgress color=\"secondary\" size=\"10rem\" />\r\n          </div>\r\n        </div>\r\n      )}\r\n      <NavBar\r\n        userState={userState}\r\n        removeCookie={removeCookie}\r\n        cookies={cookies}\r\n      />\r\n      <Switch>\r\n        <Route path=\"/\" component={Home} exact />\r\n        <Route path=\"/storage/vertical\" component={StorageVertical} />\r\n        <Route path=\"/storage\" component={StorageAnime} exact />\r\n        <Route path=\"/faq\" component={FAQ} />\r\n        <Route path=\"/anime/search\" component={SearchedList} />\r\n        <Route\r\n          path=\"/anime/:malId/watch/:episode/:mode\"\r\n          component={EpisodePage}\r\n        />\r\n        <Route path=\"/person/:personId\" component={PersonDetail} />\r\n        <Route\r\n          path=\"/character/:characterId\"\r\n          component={CharacterDetail}\r\n        />\r\n        <Route path=\"/anime/:name\" component={AnimeDetail} />\r\n        <Route path=\"/manga/:name\" component={AnimeDetail} />\r\n        {userState && userState.role === \"Admin\" && (\r\n          <Route path=\"/admin\" component={AdminManager} exact />\r\n        )}\r\n        {userState && <Route path=\"/theater\" component={Theater} />}\r\n        {userState && <Route path=\"/edit\" component={EditUser} />}\r\n        {userState && <Route path=\"/requests\" component={RequestedAnime} />}\r\n        {!userState && <Route path=\"/auth/login\" component={Login} />}\r\n        {!userState && <Route path=\"/auth/register\" component={Register} />}\r\n        <Route path=\"/*\" component={NotFound} />\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}