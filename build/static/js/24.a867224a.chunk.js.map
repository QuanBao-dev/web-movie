{"version":3,"sources":["../../../../src/internal/util/isNumeric.ts","../../../../src/internal/operators/mergeMap.ts","components/Input/Input.js","../../../../src/internal/operators/pluck.ts","../../../../src/internal/operators/filter.ts","../../../../src/internal/observable/timer.ts","../../../../src/internal/operators/mergeMapTo.ts","../../../../src/internal/observable/interval.ts","store/carousel.js","epics/carousel.js","Functions/carousel.js","Hook/carousel.js","components/FormEditCarousel/FormEditCarousel.js","components/Carousel/Carousel.js"],"names":["isNumeric","val","concurrent","resultSelector","source","MergeMapOperator","MergeMapSubscriber","destination","project","Number","_this","_super","_next","value","push","_tryNext","result","index","error","err","active","_innerSub","innerSubscriber","innerSubscription","hasCompleted","unsubscribe","prototype","notifyNext","notifyComplete","buffer","Input","label","input","type","defaultValue","onKeyUp","style","width","className","ref","required","_i","length","plucker","props","x","i","p","currentProp","undefined","filter","predicate","thisArg","FilterOperator","call","FilterSubscriber","tslib_1","scheduler","dueTime","period","periodOrScheduler","async","Observable","subscriber","dispatch","state","closed","counter","initialState","dataCarousel","isShowFormEditCarousel","behaviorSubject","BehaviorSubject","carouselStream","subscribe","setState","v","currentState","ans","init","next","updateData","data","updateDataQuick","keys","Object","forEach","key","fetchCarousel","subscription","timer","pipe","mergeMapTo","ajax","pluck","catchError","of","useInitCarousel","setCarouselState","setCarousel","useEffect","useAutoSlidingNextPage","pageCarousel","setPageCarousel","intervalSub","interval","page","document","querySelector","transition","autoSlidingNextPage","base64DataUrl","file","Promise","resolve","reject","reader","FileReader","onerror","onload","ev","target","readAsDataURL","FormEditCarousel","useRef","malIdInputRef","idInputRef","imageUrlInputRef","useCookies","cookies","styleFormWrapper","styleBackground","styleContainer","transform","display","zIndex","onClick","marginTop","e","a","preventDefault","$","bind","current","trim","includes","navBarStore","updateIsShowBlockPopUp","url","files","fetch","method","body","JSON","stringify","malId","headers","authorization","idCartoonUser","res","json","resJson","Error","message","CarouselItem","loadable","fallback","Carousel","user","userStream","useState","carouselState","history","useHistory","setTimeout","pageDisplay","role","offsetWidth","scrollWidth","map"],"mappings":"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","file":"static/js/24.a867224a.chunk.js","sourcesContent":[null,null,"import \"./Input.css\";\r\nimport React from \"react\";\r\n\r\nconst Input = ({\r\n  label,\r\n  input,\r\n  type,\r\n  error = null,\r\n  defaultValue = \"\",\r\n  onKeyUp,\r\n}) => {\r\n  return (\r\n    <div style={{ width: \"100%\" }}>\r\n      <div className=\"form-custom\">\r\n        <input\r\n          onKeyUp={onKeyUp}\r\n          defaultValue={defaultValue}\r\n          ref={input}\r\n          type={type || \"text\"}\r\n          required\r\n        />\r\n        <label className=\"label-name\">{label}</label>\r\n      </div>\r\n      {error && <div className=\"error-message\">{error}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Input;\r\n",null,null,null,null,null,"import { BehaviorSubject } from \"rxjs\";\r\nconst initialState = {\r\n  dataCarousel: [],\r\n  isShowFormEditCarousel: false,\r\n};\r\nconst behaviorSubject = new BehaviorSubject(initialState);\r\n\r\nlet state = initialState;\r\n\r\nconst carouselStore = {\r\n  initialState,\r\n  subscribe: (setState) => behaviorSubject.subscribe((v) => setState(v)),\r\n  currentState: () => {\r\n    let ans;\r\n    behaviorSubject.subscribe((v) => {\r\n      ans = v;\r\n    });\r\n    return ans || initialState;\r\n  },\r\n  init: () => {\r\n    behaviorSubject.next(state);\r\n  },\r\n  updateData: (data = initialState) => {\r\n    state = {\r\n      ...state,\r\n      ...data,\r\n    };\r\n    behaviorSubject.next(state);\r\n  },\r\n  updateDataQuick: (data = initialState) => {\r\n    const keys = Object.keys(data);\r\n    keys.forEach((key) => {\r\n      state[key] = data[key];\r\n    });\r\n  },\r\n};\r\n\r\nexport default carouselStore;\r\n","import { of, timer } from 'rxjs';\r\nimport { ajax } from 'rxjs/ajax';\r\nimport { catchError, filter, mergeMapTo, pluck } from 'rxjs/operators';\r\n\r\nimport carouselStore from '../store/carousel';\r\n\r\nexport const carouselStream = carouselStore;\r\nexport function fetchCarousel$() {\r\n  return timer(0).pipe(\r\n    filter(() => carouselStream.currentState().dataCarousel.length === 0),\r\n    mergeMapTo(\r\n      ajax(\"/api/movies/carousel\").pipe(\r\n        pluck(\"response\", \"message\"),\r\n        catchError((error) => of({ error }))\r\n      )\r\n    )\r\n  );\r\n}\r\n","import { interval } from \"rxjs\";\r\nimport { carouselStream, fetchCarousel$ } from \"../epics/carousel\";\r\nexport const initCarousel = (setCarousel) => {\r\n  return () => {\r\n    const subscription = carouselStream.subscribe(setCarousel);\r\n    carouselStream.init();\r\n    return () => {\r\n      subscription.unsubscribe();\r\n    };\r\n  };\r\n};\r\n\r\nexport const fetchCarousel = () => {\r\n  return () => {\r\n    const subscription = fetchCarousel$().subscribe((v) => {\r\n      if (!v.error) carouselStream.updateData({ dataCarousel: v });\r\n    });\r\n    return () => {\r\n      subscription.unsubscribe();\r\n    };\r\n  };\r\n};\r\n\r\nexport const autoSlidingNextPage = (pageCarousel, setPageCarousel) => {\r\n  return () => {\r\n    const intervalSub = interval(5000).subscribe(() => {\r\n      const page = pageCarousel;\r\n      document.querySelector(\".section-carousel-container\").style.transition =\r\n        \"0.4s\";\r\n      setPageCarousel(page + 1);\r\n    });\r\n    return () => {\r\n      intervalSub.unsubscribe();\r\n    };\r\n  };\r\n};\r\n","import { useEffect } from \"react\";\r\nimport {\r\n  autoSlidingNextPage,\r\n  fetchCarousel,\r\n  initCarousel,\r\n} from \"../Functions/carousel\";\r\n\r\nexport const useInitCarousel = (setCarouselState) => {\r\n  useEffect(initCarousel(setCarouselState), []);\r\n};\r\n\r\nexport const useFetchCarousel = () => {\r\n  useEffect(fetchCarousel(), []);\r\n};\r\n\r\nexport const useAutoSlidingNextPage = (pageCarousel, setPageCarousel) => {\r\n  useEffect(autoSlidingNextPage(pageCarousel, setPageCarousel), [pageCarousel]);\r\n};\r\n","import \"./FormEditCarousel.css\";\r\n\r\nimport React, { useRef } from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport navBarStore from \"../../store/navbar\";\r\nimport { carouselStream } from \"../../epics/carousel\";\r\nimport Input from \"../Input/Input\";\r\n\r\nconst FormEditCarousel = () => {\r\n  const [malIdInputRef, idInputRef, imageUrlInputRef] = [\r\n    useRef(),\r\n    useRef(),\r\n    useRef(),\r\n  ];\r\n  const [cookies] = useCookies([\"idCartoonUser\"]);\r\n  let styleFormWrapper = {},\r\n    styleBackground = {},\r\n    styleContainer = {};\r\n\r\n  if (carouselStream.currentState().isShowFormEditCarousel) {\r\n    styleFormWrapper = {\r\n      transform: \"translateY(0)\",\r\n    };\r\n    styleBackground = {\r\n      display: \"block\",\r\n    };\r\n    styleContainer = {\r\n      zIndex: 12,\r\n    };\r\n  }\r\n  return (\r\n    <div style={styleContainer} className=\"form-edit-carousel-container\">\r\n      <div\r\n        style={styleBackground}\r\n        className=\"form-edit-carousel-container__background\"\r\n        onClick={() => {\r\n          carouselStream.updateData({ isShowFormEditCarousel: false });\r\n        }}\r\n      ></div>\r\n      <form className=\"form-edit-carousel-wrapper\" style={styleFormWrapper}>\r\n        <Input label={\"Mal Id\"} input={malIdInputRef} />\r\n        <Input label={\"Id (0 - 4)\"} input={idInputRef} type=\"number\" />\r\n        <Input label={\"Image Url\"} input={imageUrlInputRef} />\r\n        <input\r\n          className=\"file-upload-carousel\"\r\n          type=\"file\"\r\n          style={{ width: \"100%\", marginTop: \"1rem\" }}\r\n        />\r\n        <button\r\n          className=\"button-submit-carousel\"\r\n          onClick={async (e) => {\r\n            e.preventDefault();\r\n            const $ = document.querySelector.bind(document);\r\n            if (\r\n              ![\r\n                malIdInputRef.current.value.trim(),\r\n                imageUrlInputRef.current.value.trim(),\r\n                idInputRef.current.value.trim(),\r\n              ].includes(\"\") ||\r\n              ![\r\n                malIdInputRef.current.value.trim(),\r\n                idInputRef.current.value.trim(),\r\n                $(\".file-upload-carousel\").value.trim(),\r\n              ].includes(\"\")\r\n            )\r\n              try {\r\n                navBarStore.updateIsShowBlockPopUp(true);\r\n                let url = \"\";\r\n                if ($(\".file-upload-carousel\").value.trim() !== \"\") {\r\n                  url = await base64DataUrl(\r\n                    $(\".file-upload-carousel\").files[0]\r\n                  );\r\n                } else {\r\n                  url = imageUrlInputRef.current.value;\r\n                }\r\n                const res = await fetch(\r\n                  \"/api/movies/carousel/\" + idInputRef.current.value,\r\n                  {\r\n                    method: \"PUT\",\r\n                    body: JSON.stringify({\r\n                      malId: malIdInputRef.current.value,\r\n                      url,\r\n                    }),\r\n\r\n                    headers: {\r\n                      authorization: `Bearer ${cookies.idCartoonUser}`,\r\n                      \"Content-Type\":\"application/json\"\r\n                    },\r\n                  }\r\n                );\r\n                const resJson = await res.json();\r\n                if (resJson.error) throw Error(\"Some things went wrong\");\r\n                carouselStream.updateData({\r\n                  dataCarousel: resJson.message,\r\n                  isShowFormEditCarousel: false,\r\n                });\r\n              } catch (error) {}\r\n            navBarStore.updateIsShowBlockPopUp(false);\r\n          }}\r\n        >\r\n          Submit\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction base64DataUrl(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onerror = function () {\r\n      reject(\"Your file is too big\");\r\n    };\r\n    reader.onload = function (ev) {\r\n      reader.error && reject(reader.error);\r\n      resolve(ev.target.result);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  });\r\n}\r\n\r\nexport default FormEditCarousel;\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport \"./Carousel.css\";\r\n\r\nimport loadable from \"@loadable/component\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { carouselStream } from \"../../epics/carousel\";\r\nimport { userStream } from \"../../epics/user\";\r\nimport {\r\n  useAutoSlidingNextPage,\r\n  useFetchCarousel,\r\n  useInitCarousel,\r\n} from \"../../Hook/carousel\";\r\nimport FormEditCarousel from \"../FormEditCarousel/FormEditCarousel\";\r\n\r\nconst CarouselItem = loadable(() => import(\"../CarouselItem/CarouselItem\"), {\r\n  fallback: (\r\n    <div className=\"section-carousel-container\">\r\n      <i className=\"fas fa-spinner fa-9x fa-spin\"></i>\r\n    </div>\r\n  ),\r\n});\r\nconst Carousel = () => {\r\n  const user = userStream.currentState();\r\n  const [carouselState, setCarouselState] = useState(\r\n    carouselStream.currentState()\r\n  );\r\n  const [pageCarousel, setPageCarousel] = useState(0);\r\n  const history = useHistory();\r\n  useInitCarousel(setCarouselState);\r\n  useFetchCarousel();\r\n  useAutoSlidingNextPage(pageCarousel, setPageCarousel);\r\n  const { dataCarousel } = carouselState;\r\n  useEffect(() => {\r\n    if (pageCarousel === dataCarousel.length) {\r\n      setTimeout(() => {\r\n        if (document.querySelector(\".section-carousel-container\")) {\r\n          document.querySelector(\r\n            \".section-carousel-container\"\r\n          ).style.transition = \"0s\";\r\n          setPageCarousel(0);\r\n        }\r\n      }, 400);\r\n    }\r\n    if (pageCarousel === -1) {\r\n      setTimeout(() => {\r\n        if (document.querySelector(\".section-carousel-container\")) {\r\n          document.querySelector(\r\n            \".section-carousel-container\"\r\n          ).style.transition = \"0s\";\r\n          setPageCarousel(dataCarousel.length - 1);\r\n        }\r\n      }, 400);\r\n    }\r\n  }, [pageCarousel]);\r\n  const pageDisplay =\r\n    pageCarousel === -1\r\n      ? dataCarousel.length - 1\r\n      : pageCarousel === dataCarousel.length\r\n      ? 0\r\n      : pageCarousel;\r\n  return (\r\n    <div>\r\n      <FormEditCarousel />\r\n      <div className=\"background\">\r\n        <div className=\"container-menu-control\">\r\n          <div\r\n            className=\"button-left hover-button\"\r\n            onClick={() => {\r\n              const page = pageCarousel;\r\n              if (page - 1 >= -1) {\r\n                document.querySelector(\r\n                  \".section-carousel-container\"\r\n                ).style.transition = \"0.4s\";\r\n                setPageCarousel(page - 1);\r\n              }\r\n            }}\r\n          >\r\n            <i className=\"fas fa-caret-left fa-4x\"></i>\r\n          </div>\r\n          <div\r\n            className=\"button-right hover-button\"\r\n            onClick={() => {\r\n              const page = pageCarousel;\r\n              if (page + 1 <= dataCarousel.length) {\r\n                document.querySelector(\r\n                  \".section-carousel-container\"\r\n                ).style.transition = \"0.4s\";\r\n                setPageCarousel(page + 1);\r\n              }\r\n            }}\r\n          >\r\n            <i className=\"fas fa-caret-right fa-4x\"></i>\r\n          </div>\r\n        </div>\r\n        {user && user.role === \"Admin\" && (\r\n          <div className=\"button-update-carousel-container\">\r\n            <button\r\n              className=\"btn btn-success\"\r\n              onClick={() => {\r\n                carouselStream.updateData({ isShowFormEditCarousel: true });\r\n              }}\r\n            >\r\n              Update\r\n            </button>\r\n          </div>\r\n        )}\r\n        <section className=\"layout-section\">\r\n          <div\r\n            className=\"section-carousel-container\"\r\n            style={{\r\n              transform: `translateX(${\r\n                document.querySelector(\".item\")\r\n                  ? -document.querySelector(\".item\").offsetWidth *\r\n                      pageCarousel -\r\n                    document.querySelector(\".item\").offsetWidth\r\n                  : -document.body.scrollWidth\r\n              }px)`,\r\n            }}\r\n          >\r\n            {dataCarousel && dataCarousel[dataCarousel.length - 1] && (\r\n              <CarouselItem data={dataCarousel[dataCarousel.length - 1]} />\r\n            )}\r\n            {dataCarousel &&\r\n              dataCarousel.map((data) => (\r\n                <CarouselItem key={data.malId} data={data} />\r\n              ))}\r\n            {dataCarousel && dataCarousel[0] && (\r\n              <CarouselItem data={dataCarousel[0]} history={history} />\r\n            )}\r\n          </div>\r\n        </section>\r\n      </div>\r\n      <div className=\"list-dot-carousel\">\r\n        {dataCarousel &&\r\n          dataCarousel.map((data, key) => (\r\n            <div\r\n              key={key}\r\n              onClick={() => {\r\n                document.querySelector(\r\n                  \".section-carousel-container\"\r\n                ).style.transition = \"0.4s\";\r\n                setPageCarousel(key);\r\n              }}\r\n              className={`dot-item${pageDisplay === key ? \" active-dot\" : \"\"}`}\r\n            ></div>\r\n          ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Carousel;\r\n"],"sourceRoot":""}