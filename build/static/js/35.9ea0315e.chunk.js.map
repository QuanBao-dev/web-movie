{"version":3,"sources":["../../../../src/internal/util/isNumeric.ts","../../../../src/internal/operators/pluck.ts","../../../../src/internal/operators/switchMap.ts","../../../../src/internal/observable/timer.ts","../../../../src/internal/operators/retry.ts","store/updatedAnime.js","epics/updatedAnime.js","../../../../src/internal/operators/switchMapTo.ts","Hook/updatedAnime.js","Functions/updatedAnime.js","components/UpdatedAnime/UpdatedAnime.js"],"names":["isNumeric","val","_i","length","plucker","props","x","i","p","currentProp","undefined","switchMap","project","resultSelector","SwitchMapOperator","prototype","call","source","SwitchMapSubscriber","_super","destination","_this","tslib_1","result","index","error","_innerSub","innerSubscription","innerSubscriber","SimpleInnerSubscriber","innerSubscribe","_unsubscribe","notifyComplete","notifyNext","scheduler","dueTime","period","Number","periodOrScheduler","async","Observable","subscriber","dispatch","state","closed","count","RetryOperator","RetrySubscriber","isStopped","_a","err","initialState","currentPageBoxMovie","currentPageUpdatedMovie","updatedMovie","boxMovie","lastPageUpdatedMovie","lastPageBoxMovie","subNavToggle","triggerFetch","behaviorSubject","BehaviorSubject","updatedAnimeStream","subscribe","setState","v","currentState","ans","init","next","updateData","data","updateDataQuick","keys","Object","forEach","key","fetchUpdatedMovie$","timer","pipe","switchMapTo","ajax","url","pluck","retry","catchError","of","fetchBoxMovie$","idCartoonUser","headers","authorization","from","innerObservable","useInitUpdatedAnime","setUpdatedAnime","useEffect","subscription","unsubscribe","initUpdatedAnime","PaginationAnime","loadable","fallback","className","SubNavBar","setSubNavToggle","user","onClick","UpdatedAnime","useState","updatedAnimeState","setUpdatedAnimeState","isEmpty","setIsEmpty","useCookies","cookies","userStream","subscription8","subscription9","lastPage","navBarStore","updateIsShowBlockPopUp","useFetchAnimeList","style","paddingBottom","boxShadow","backgroundColor","marginBottom","currentPage"],"mappings":"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","file":"static/js/35.9ea0315e.chunk.js","sourcesContent":[null,null,null,null,null,"import { BehaviorSubject } from \"rxjs\";\r\nconst initialState = {\r\n  currentPageBoxMovie: 1,\r\n  currentPageUpdatedMovie: 1,\r\n  updatedMovie: [],\r\n  boxMovie: [],\r\n  lastPageUpdatedMovie: 1,\r\n  lastPageBoxMovie: 1,\r\n  subNavToggle: null,\r\n  triggerFetch:false\r\n};\r\nconst behaviorSubject = new BehaviorSubject(initialState);\r\n\r\nlet state = initialState;\r\n\r\nconst updatedAnimeStore = {\r\n  initialState,\r\n  subscribe: (setState) => behaviorSubject.subscribe((v) => setState(v)),\r\n  currentState: () => {\r\n    let ans;\r\n    behaviorSubject.subscribe((v) => {\r\n      ans = v;\r\n    });\r\n    return ans || initialState;\r\n  },\r\n  init: () => {\r\n    behaviorSubject.next(state);\r\n  },\r\n  updateData: (data = initialState) => {\r\n    state = {\r\n      ...state,\r\n      ...data,\r\n    };\r\n    behaviorSubject.next(state);\r\n  },\r\n  updateDataQuick: (data = initialState) => {\r\n    const keys = Object.keys(data);\r\n    keys.forEach((key) => {\r\n      state[key] = data[key];\r\n    });\r\n  },\r\n};\r\n\r\nexport default updatedAnimeStore;\r\n","import { from, of, timer } from \"rxjs\";\r\nimport { ajax } from \"rxjs/ajax\";\r\nimport {\r\n  catchError,\r\n  pluck,\r\n  retry,\r\n  switchMap,\r\n  switchMapTo,\r\n} from \"rxjs/operators\";\r\nimport updatedAnimeStore from \"../store/updatedAnime\";\r\n\r\nexport const updatedAnimeStream = updatedAnimeStore;\r\n\r\nexport const fetchUpdatedMovie$ = () => {\r\n  return timer(0).pipe(\r\n    switchMapTo(\r\n      ajax({\r\n        url:\r\n          \"/api/movies/latest?page=\" +\r\n          updatedAnimeStream.currentState().currentPageUpdatedMovie,\r\n      }).pipe(\r\n        pluck(\"response\", \"message\"),\r\n        retry(20),\r\n        catchError(() => of([]))\r\n      )\r\n    )\r\n  );\r\n};\r\n\r\nexport const fetchBoxMovie$ = (idCartoonUser) => {\r\n  return timer(0).pipe(\r\n    switchMap(() =>\r\n      ajax({\r\n        url:\r\n          \"/api/movies/box?page=\" +\r\n          updatedAnimeStream.currentState().currentPageBoxMovie,\r\n        headers: {\r\n          authorization: `Bearer ${idCartoonUser}`,\r\n        },\r\n      }).pipe(\r\n        pluck(\"response\", \"message\"),\r\n        retry(20),\r\n        catchError((err) => from([]))\r\n      )\r\n    )\r\n  );\r\n};\r\n",null,"import { useEffect } from \"react\";\r\nimport {\r\n  fetchBoxMovie$,\r\n  fetchUpdatedMovie$,\r\n  updatedAnimeStream,\r\n} from \"../epics/updatedAnime\";\r\nimport { initUpdatedAnime } from \"../Functions/updatedAnime\";\r\nimport navBarStore from \"../store/navbar\";\r\n\r\nexport const useInitUpdatedAnime = (setUpdatedAnime) => {\r\n  useEffect(initUpdatedAnime(setUpdatedAnime), []);\r\n};\r\n\r\nexport const useFetchAnimeList = (\r\n  updatedAnimeState,\r\n  subNavToggle,\r\n  setIsEmpty,\r\n  cookies\r\n) => {\r\n  useEffect(() => {\r\n    let subscription8, subscription9;\r\n    if (subNavToggle === 0) {\r\n      setIsEmpty(true);\r\n      subscription8 = fetchUpdatedMovie$().subscribe(({ data, lastPage }) => {\r\n        updatedAnimeStream.updateData({\r\n          updatedMovie: data,\r\n          lastPageUpdatedMovie: lastPage,\r\n        });\r\n        setIsEmpty(false);\r\n        navBarStore.updateIsShowBlockPopUp(false);\r\n      });\r\n    }\r\n    if (subNavToggle === 1) {\r\n      setIsEmpty(true);\r\n      subscription9 = fetchBoxMovie$(cookies.idCartoonUser).subscribe(\r\n        ({ data, lastPage }) => {\r\n          updatedAnimeStream.updateData({\r\n            boxMovie: data,\r\n            lastPageBoxMovie: lastPage,\r\n          });\r\n          setIsEmpty(false);\r\n          navBarStore.updateIsShowBlockPopUp(false);\r\n        }\r\n      );\r\n    }\r\n    return () => {\r\n      subscription8 && subscription8.unsubscribe();\r\n      subscription9 && subscription9.unsubscribe();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [\r\n    subNavToggle,\r\n    updatedAnimeState.currentPageBoxMovie,\r\n    updatedAnimeState.currentPageUpdatedMovie,\r\n    updatedAnimeState.triggerFetch,\r\n  ]);\r\n};\r\n","import { updatedAnimeStream } from \"../epics/updatedAnime\";\r\n\r\nexport const initUpdatedAnime = (setUpdatedAnime) => {\r\n  return () => {\r\n    const subscription = updatedAnimeStream.subscribe(setUpdatedAnime);\r\n    updatedAnimeStream.init();\r\n    return () => {\r\n      subscription.unsubscribe();\r\n    };\r\n  };\r\n};\r\n","import \"./UpdatedAnime.css\";\r\n\r\nimport loadable from \"@loadable/component\";\r\nimport React, { useState } from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\n\r\nimport { updatedAnimeStream } from \"../../epics/updatedAnime\";\r\nimport { userStream } from \"../../epics/user\";\r\nimport {\r\n  useFetchAnimeList,\r\n  useInitUpdatedAnime,\r\n} from \"../../Hook/updatedAnime\";\r\n\r\nconst PaginationAnime = loadable(\r\n  () => import(\"../PaginationAnimeList/PaginationAnime\"),\r\n  {\r\n    fallback: (\r\n      <div>\r\n        <i className=\"fas fa-spinner fa-9x fa-spin\"></i>\r\n      </div>\r\n    ),\r\n  }\r\n);\r\n\r\nconst UpdatedAnime = () => {\r\n  const [updatedAnimeState, setUpdatedAnimeState] = useState(\r\n    updatedAnimeStream.currentState()\r\n  );\r\n  const [isEmpty, setIsEmpty] = useState(true);\r\n  const [subNavToggle, setSubNavToggle] = useState(\r\n    updatedAnimeStream.currentState().subNavToggle || 0\r\n  );\r\n  const [cookies] = useCookies([\"idCartoonUser\"]);\r\n  const user = userStream.currentState();\r\n  useInitUpdatedAnime(setUpdatedAnimeState);\r\n  useFetchAnimeList(updatedAnimeState, subNavToggle, setIsEmpty, cookies);\r\n  return (\r\n    <div\r\n      style={{\r\n        paddingBottom: \"1.2rem\",\r\n        boxShadow: \"0 0 3px 3px rgb(51, 57, 92)\",\r\n        backgroundColor: \"#212541\",\r\n        marginBottom: \"0.7rem\",\r\n      }}\r\n    >\r\n      <SubNavBar\r\n        subNavToggle={subNavToggle}\r\n        setSubNavToggle={setSubNavToggle}\r\n        user={user}\r\n      />\r\n      <PaginationAnime\r\n        updatedMovie={\r\n          subNavToggle === 0\r\n            ? updatedAnimeState.updatedMovie\r\n            : updatedAnimeState.boxMovie\r\n        }\r\n        lastPage={\r\n          subNavToggle === 0\r\n            ? updatedAnimeState.lastPageUpdatedMovie\r\n            : updatedAnimeState.lastPageBoxMovie\r\n        }\r\n        subNavToggle={subNavToggle}\r\n        currentPage={\r\n          subNavToggle === 0\r\n            ? updatedAnimeStream.currentState().currentPageUpdatedMovie\r\n            : updatedAnimeStream.currentState().currentPageBoxMovie\r\n        }\r\n        isEmpty={isEmpty}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction SubNavBar({ subNavToggle, setSubNavToggle, user }) {\r\n  return (\r\n    <div className=\"sub-nav-bar\">\r\n      <h1\r\n        className={`sub-nav-item${subNavToggle === 0 ? \" sub-nav-active\" : \"\"}`}\r\n        onClick={() => {\r\n          setSubNavToggle(0);\r\n          updatedAnimeStream.updateDataQuick({ subNavToggle: 0 });\r\n        }}\r\n      >\r\n        Updated Anime\r\n      </h1>\r\n      {user && (\r\n        <h1\r\n          className={`sub-nav-item${\r\n            subNavToggle === 1 ? \" sub-nav-active\" : \"\"\r\n          }`}\r\n          onClick={() => {\r\n            setSubNavToggle(1);\r\n            updatedAnimeStream.updateDataQuick({ subNavToggle: 1 });\r\n          }}\r\n        >\r\n          Box Anime\r\n        </h1>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UpdatedAnime;\r\n"],"sourceRoot":""}